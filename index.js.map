{"version":3,"file":"index.js","mappings":"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","sources":["webpack://my-webpack-project/./src/components/Cards.js","webpack://my-webpack-project/./src/pages/AbstractView.js","webpack://my-webpack-project/./src/pages/Home.js","webpack://my-webpack-project/./src/pages/productDetails.js","webpack://my-webpack-project/./src/index.js"],"sourcesContent":["class Cards {\r\n  draw(data) {\r\n    const products = data;\r\n\r\n    const fragment = document.createDocumentFragment();\r\n    const cardItemTemp = document.querySelector('#cardTemplate');\r\n    products.forEach((item, idx) => {\r\n      const cardClone = cardItemTemp.content.cloneNode(true);\r\n      cardClone.id = `${item.id}`;\r\n      cardClone.querySelector(\r\n        '.card__body-photo'\r\n      ).style.backgroundImage = `url(${item.thumbnail})`;\r\n      cardClone.querySelector('.card__body-title').textContent = item.title;\r\n      cardClone.querySelector(\r\n        '.list__item-category'\r\n      ).textContent = `Category ${item.category}`;\r\n\r\n      cardClone.querySelector(\r\n        '.list__item-brand'\r\n      ).textContent = `Brand: ${item.brand}`;\r\n      cardClone.querySelector(\r\n        '.list__item-price'\r\n      ).textContent = `Price: ${item.price}`;\r\n      cardClone.querySelector(\r\n        '.list__item-rating'\r\n      ).textContent = `Rating: ${item.rating}`;\r\n      cardClone.querySelector(\r\n        '.list__item-stock'\r\n      ).textContent = `Stock: ${item.stock} `;\r\n      cardClone.querySelector(\r\n        '.card__link-details'\r\n      ).href = `/#/product-details/${item.id}`;\r\n      fragment.append(cardClone);\r\n    });\r\n    return fragment;\r\n  }\r\n}\r\nexport default Cards;\r\n","class AbstractView {\r\n  constructor(params) {\r\n    this.params = params;\r\n  }\r\n\r\n  setTitle(title) {\r\n    document.title = title;\r\n  }\r\n\r\n  async render() {\r\n    return '';\r\n  }\r\n  async executeViewScript() {} // !!! The fix\r\n}\r\nexport { AbstractView };\r\n","import Cards from '../components/Cards.js';\r\nimport { AbstractView } from './AbstractView.js';\r\n\r\nclass Home extends AbstractView {\r\n  constructor(params) {\r\n    super(params);\r\n    this.setTitle('Home');\r\n    this.productsView = new Cards();\r\n  }\r\n  async getAllProducts() {\r\n    const response = await fetch('https://dummyjson.com/products');\r\n    const data = await response.json();\r\n\r\n    const productsList = this.productsView.draw(data.products);\r\n\r\n    return productsList;\r\n  }\r\n  async executeViewScript() {\r\n    const productsList = await this.getAllProducts();\r\n    const productListContainer = document.querySelector('.products');\r\n    productListContainer.append(productsList);\r\n  }\r\n  async render() {\r\n    return '<section class=\"products container\"></section>';\r\n  }\r\n}\r\nexport { Home };\r\n","import Cards from '../components/Cards';\nimport { AbstractView } from './AbstractView';\n\nclass ProductDetails extends AbstractView {\n  constructor(params) {\n    super(params);\n    this.productId = params.id;\n    this.setTitle('Product Details');\n    this.productsView = new Cards();\n  }\n  async getItem() {\n    const response = await fetch(\n      `https://dummyjson.com/products/${this.productId}`\n    );\n    const data = await response.json();\n    const productItem = this.productsView.draw([data]);\n\n    return productItem;\n  }\n  async executeViewScript() {\n    const productItem = await this.getItem();\n\n    const productItemContainer = document.querySelector('#root .container');\n    productItemContainer.append(productItem);\n  }\n  async render() {\n    return `\n    <div class=\"container\">\n  </div>`;\n  }\n}\nexport { ProductDetails };\n","import './styles/main.scss';\n\nimport { Home } from './pages/Home';\nimport { ProductDetails } from './pages/productDetails';\n\nconst pathToRegex = (path) =>\n  new RegExp('^' + path.replace(/\\//g, '\\\\/').replace(/:\\w+/g, '(.+)') + '$');\n\nconst getParams = (match) => {\n  const values = match.result.slice(1);\n  const keys = Array.from(match.route.path.matchAll(/:(\\w+)/g)).map(\n    (result) => result[1]\n  );\n\n  return Object.fromEntries(\n    keys.map((key, i) => {\n      return [key, values[i]];\n    })\n  );\n};\n\nconst navigateTo = (url) => {\n  history.pushState(null, null, url);\n  router();\n};\n\nconst router = async () => {\n  const path = location.hash.slice(1).toLocaleLowerCase() || '/';\n\n  const routes = [\n    { path: '/', view: Home },\n\n    { path: '/product-details/:id', view: ProductDetails },\n  ];\n  // Test each route for potential match\n  const potentialMatches = routes.map((route) => {\n    const hash = location.hash.slice(1);\n    return {\n      route: route,\n      result: hash.match(pathToRegex(route.path)),\n    };\n  });\n\n  let match = potentialMatches.find(\n    (potentialMatch) => potentialMatch.result !== null\n  );\n\n  if (!match) {\n    match = {\n      route: routes[0],\n      result: [location.pathname],\n    };\n  }\n\n  const view = new match.route.view(getParams(match));\n\n  document.querySelector('#root').innerHTML = await view.render();\n  await view.executeViewScript();\n};\n\nwindow.addEventListener('popstate', router);\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  document.body.addEventListener('click', (e) => {\n    if (e.target.matches('[data-link]')) {\n      e.preventDefault();\n      navigateTo(e.target.href);\n    }\n  });\n\n  router();\n});\n"],"names":["draw","data","products","fragment","document","createDocumentFragment","cardItemTemp","querySelector","forEach","item","idx","cardClone","content","cloneNode","id","style","backgroundImage","thumbnail","textContent","title","category","brand","price","rating","stock","href","append","AbstractView","constructor","params","this","setTitle","async","Home","super","productsView","response","fetch","json","productsList","getAllProducts","ProductDetails","productId","productItem","getItem","router","location","hash","slice","toLocaleLowerCase","routes","path","view","match","map","route","result","RegExp","replace","find","potentialMatch","pathname","values","keys","Array","from","matchAll","Object","fromEntries","key","i","getParams","innerHTML","render","executeViewScript","window","addEventListener","body","e","url","target","matches","preventDefault","history","pushState"],"sourceRoot":""}