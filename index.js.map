{"version":3,"file":"index.js","mappings":"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","sources":["webpack://my-webpack-project/./src/pages/AbstractView.ts","webpack://my-webpack-project/./src/utils/RouterHelper.ts","webpack://my-webpack-project/./src/utils/Validator.ts","webpack://my-webpack-project/./src/pages/Basket/ModalWindow.ts","webpack://my-webpack-project/./src/pages/Basket/htmlModal.ts","webpack://my-webpack-project/./src/pages/Basket/promocodes.ts","webpack://my-webpack-project/./src/pages/Basket/PromoCode.ts","webpack://my-webpack-project/./src/pages/Basket/Cart.ts","webpack://my-webpack-project/./src/pages/Basket/htmlCart.ts","webpack://my-webpack-project/./src/utils/Storage.ts","webpack://my-webpack-project/./src/components/CartComponent.ts","webpack://my-webpack-project/./src/components/Listeners/PhotoListener.ts","webpack://my-webpack-project/./src/pages/ProductDetails/ProductDetails.ts","webpack://my-webpack-project/./src/components/ProductDetailsCard.ts","webpack://my-webpack-project/./src/pages/404/404.ts","webpack://my-webpack-project/./src/components/Sort/Sort.ts","webpack://my-webpack-project/./src/components/Listeners/PriceFilterSlider.ts","webpack://my-webpack-project/./src/components/Listeners/SearchListener.ts","webpack://my-webpack-project/./src/components/Listeners/StockFilterSlider.ts","webpack://my-webpack-project/./src/components/Listeners/UrlCopyListener.ts","webpack://my-webpack-project/./src/utils/Sort.ts","webpack://my-webpack-project/./src/pages/Home/Home.ts","webpack://my-webpack-project/./src/components/ProductCards.ts","webpack://my-webpack-project/./src/components/Listeners/AllListener.ts","webpack://my-webpack-project/./src/components/Listeners/FilterListener.ts","webpack://my-webpack-project/./src/pages/Home/htmlData.ts","webpack://my-webpack-project/./src/utils/ProductsData.ts","webpack://my-webpack-project/./src/components/Header.ts","webpack://my-webpack-project/./src/index.ts","webpack://my-webpack-project/./src/components/App.ts","webpack://my-webpack-project/./src/utils/Router.ts"],"sourcesContent":["class AbstractView {\r\n    constructor(params) {\r\n        this.params = params;\r\n    }\r\n    setTitle(title) {\r\n        document.title = title;\r\n    }\r\n    render(root, data) { }\r\n}\r\nexport { AbstractView };\r\n","class RouterHelper {\r\n}\r\nRouterHelper.checkId = (path) => {\r\n    const pathArray = path.split('/');\r\n    if (pathArray.length !== 2) {\r\n        return false;\r\n    }\r\n    const id = Number(pathArray.slice(-1).join(''));\r\n    return id;\r\n};\r\nRouterHelper.setFilter = (path) => {\r\n    if (path && path.includes('?')) {\r\n        const filtersString = path.split('?')[1].replace('/', '');\r\n        const filters = {};\r\n        filtersString.split('&').forEach((elem) => {\r\n            const [key, valuesString] = elem.split('=');\r\n            const values = valuesString.split('+');\r\n            filters[key] = values;\r\n        });\r\n        return filters;\r\n    }\r\n    return {};\r\n};\r\nexport default RouterHelper;\r\n","export default class Validator {\r\n    static isValidName(name) {\r\n        const nameArray = name.split(' ');\r\n        if (nameArray.length < 2)\r\n            return false;\r\n        return (nameArray.filter((part) => part.length > 2).length === nameArray.length);\r\n    }\r\n    static isValidPhone(number) {\r\n        const re = /^([+ ]{2}[0-9]{9,14})?$/;\r\n        return String(number).length > 0 && re.test(String(number));\r\n    }\r\n    static isValidAddress(address) {\r\n        const addressArray = address.split(' ');\r\n        if (addressArray.length < 3)\r\n            return false;\r\n        return (addressArray.filter((part) => part.length > 3).length ===\r\n            addressArray.length);\r\n    }\r\n    static isValidEmail(email) {\r\n        const re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n        return re.test(String(email).toLowerCase());\r\n    }\r\n    static isValidCardNumber(cardNumber) {\r\n        const re = /^([0-9]{4}[ ]{1}[0-9]{4}[ ]{1}[0-9]{4}[ ]{1}[0-9]{4})?$/;\r\n        return (String(cardNumber).length > 0 &&\r\n            re.test(String(cardNumber)) &&\r\n            this.isCreditCardNumber(cardNumber));\r\n    }\r\n    static isValidValidThru(validThru) {\r\n        const validThruArray = validThru.split('/');\r\n        if (validThruArray.length === 1)\r\n            return false;\r\n        if (Number(validThruArray[0]) > 12)\r\n            return false;\r\n        return (validThruArray.filter((part) => part.length === 2).length ===\r\n            validThruArray.length);\r\n    }\r\n    static isValidCvv(cvv) {\r\n        return cvv.length === 3;\r\n    }\r\n    static isCreditCardNumber(ccn) {\r\n        const cnnArr = ccn\r\n            .toString()\r\n            .split('')\r\n            .filter((n) => n !== ' ');\r\n        const result = cnnArr.map((item, i) => {\r\n            let itemNumber = Number(item);\r\n            if ((i % 2 === 0 && cnnArr.length % 2 === 0) ||\r\n                (i % 2 && cnnArr.length % 2)) {\r\n                return itemNumber * 2 > 9 ? itemNumber * 2 - 9 : itemNumber * 2;\r\n            }\r\n            return Number(item);\r\n        });\r\n        return result.reduce((prev, curr) => prev + curr, 0) % 10 === 0;\r\n    }\r\n}\r\n","import { modalLayout } from './htmlModal';\r\nimport Validator from '../../utils/Validator';\r\nexport default class Modal {\r\n    constructor() {\r\n        this.root = document.getElementById('root');\r\n    }\r\n    listener(data) {\r\n        let modal;\r\n        const buyBtn = document.querySelector('.buy__order');\r\n        buyBtn.addEventListener('click', () => {\r\n            const hash = location.hash;\r\n            if (hash !== '#cart') {\r\n                this.buyFromProductDetails(data);\r\n            }\r\n            modal = this.createModal();\r\n            const form = document.querySelector('.form');\r\n            const cardNumber = form.querySelector('.input-card-number'), validThru = form.querySelector('.input-valid-thru'), inputName = form.querySelector('.input-name'), inputNumber = form.querySelector('.input-number'), inputAddress = form.querySelector('.input-address'), inputEmail = form.querySelector('.input-email'), inputValidThru = form.querySelector('.input-valid-thru'), inputCvv = form.querySelector('.input-cvv');\r\n            form.addEventListener('submit', (event) => {\r\n                event.preventDefault();\r\n                return this.isValidForm(inputName, inputNumber, inputAddress, inputEmail, cardNumber, inputCvv, inputValidThru);\r\n            });\r\n            if (inputName) {\r\n                inputName.addEventListener('blur', (e) => {\r\n                    this.validName(inputName);\r\n                });\r\n            }\r\n            if (inputNumber) {\r\n                inputNumber.addEventListener('focus', function (e) {\r\n                    const currentTarget = e.target;\r\n                    const currentValue = currentTarget.value;\r\n                    e.target.value = `+ ${currentValue.replace(/[^\\d.]/g, '')}`;\r\n                    // currentTarget.value = `+ ${currentValue.replace(/[^\\d.]/g, '')}`;\r\n                });\r\n            }\r\n            if (inputNumber) {\r\n                inputNumber.addEventListener('blur', (e) => {\r\n                    this.validPhone(inputNumber);\r\n                });\r\n            }\r\n            if (inputAddress) {\r\n                inputAddress.addEventListener('blur', (e) => {\r\n                    this.validAddress(inputAddress);\r\n                });\r\n            }\r\n            if (inputEmail) {\r\n                inputEmail.addEventListener('blur', (e) => {\r\n                    this.validEmail(inputEmail);\r\n                });\r\n            }\r\n            if (cardNumber) {\r\n                cardNumber.addEventListener('blur', (e) => {\r\n                    this.validCardNumber(cardNumber);\r\n                });\r\n            }\r\n            if (cardNumber) {\r\n                cardNumber.addEventListener('input', (e) => {\r\n                    this.cardNumberHandler(e, cardNumber);\r\n                });\r\n            }\r\n            if (inputValidThru) {\r\n                inputValidThru.addEventListener('input', (e) => {\r\n                    this.validThruHandler(e, validThru);\r\n                });\r\n            }\r\n            if (inputValidThru) {\r\n                inputValidThru.addEventListener('blur', () => {\r\n                    this.validThru(validThru);\r\n                });\r\n            }\r\n            if (inputCvv) {\r\n                inputCvv.addEventListener('input', (e) => {\r\n                    this.cvvHandler(e, inputCvv);\r\n                });\r\n            }\r\n            if (inputCvv) {\r\n                inputCvv.addEventListener('blur', (e) => {\r\n                    this.validCvv(inputCvv);\r\n                });\r\n            }\r\n            if (inputValidThru) {\r\n                inputValidThru.addEventListener('blur', () => {\r\n                    if (!Validator.isValidValidThru(inputValidThru.value)) {\r\n                        inputValidThru.classList.add('error');\r\n                    }\r\n                    else {\r\n                        inputValidThru.classList.remove('error');\r\n                    }\r\n                });\r\n            }\r\n            if (inputCvv) {\r\n                inputCvv.addEventListener('blur', () => {\r\n                    if (!Validator.isValidCvv(inputCvv.value)) {\r\n                        inputCvv.classList.add('error');\r\n                    }\r\n                    else {\r\n                        inputCvv.classList.remove('error');\r\n                    }\r\n                });\r\n            }\r\n        });\r\n        window.addEventListener('click', (e) => {\r\n            const currentTarget = e.target;\r\n            if (currentTarget.className === 'modal') {\r\n                currentTarget.remove();\r\n            }\r\n        });\r\n    }\r\n    createModal() {\r\n        let modal = document.createElement('div');\r\n        modal.classList.add('modal');\r\n        modal.innerHTML = modalLayout;\r\n        this.root.after(modal);\r\n        return modal;\r\n    }\r\n    isValidForm(inputName, inputNumber, inputAddress, inputEmail, inputCardNumber, inputCvv, inputValidThru) {\r\n        let isValid = true;\r\n        this.validName(inputName);\r\n        this.validPhone(inputNumber);\r\n        this.validEmail(inputEmail);\r\n        this.validAddress(inputAddress);\r\n        this.validCardNumber(inputCardNumber);\r\n        this.validThru(inputValidThru);\r\n        this.validCvv(inputCvv);\r\n        isValid = document.querySelectorAll('.error').length === 0;\r\n        if (isValid) {\r\n            localStorage.clear();\r\n            window.location.hash = '';\r\n            const modalContent = document.querySelector('.modal-content');\r\n            modalContent.innerHTML = '';\r\n            modalContent.style.top = '25%';\r\n            modalContent.innerHTML =\r\n                '<p class=\"info\"> Thank you for your order! </p><p class=\"info\"> Click anywhere to continue.</p>';\r\n        }\r\n        return isValid;\r\n    }\r\n    cardNumberHandler(e, cardNumber) {\r\n        // при удалении символов сразу возврат\r\n        if (e instanceof InputEvent) {\r\n            if (!e.data)\r\n                return;\r\n        }\r\n        // сами не можем вводить пробелы\r\n        if (e instanceof InputEvent) {\r\n            if (e.data === ' ') {\r\n                cardNumber.value = cardNumber.value.slice(0, -1);\r\n                return;\r\n            }\r\n        }\r\n        // меняем все символы в строке на '' кроме цифр и пробелов\r\n        cardNumber.value = cardNumber.value.replace(/[^0-9\\s]+/g, '');\r\n        if (cardNumber.value.replace(/\\s/g, '').length % 4 === 0 &&\r\n            cardNumber.value.length > 0) {\r\n            cardNumber.value += ' ';\r\n        }\r\n        // если в строке есть 16 цифр запрещаем ввод\r\n        if (cardNumber.value.replace(/\\s/g, '').length > 15) {\r\n            cardNumber.value = cardNumber.value.slice(0, -1);\r\n        }\r\n        let bankCardImg = document.querySelector('.bankcard-img');\r\n        if (Number(cardNumber.value[0]) === 4) {\r\n            bankCardImg.src = './assets/visa.png';\r\n        }\r\n        else if (Number(cardNumber.value[0]) === 5) {\r\n            bankCardImg.src = './assets/masterCard.png';\r\n        }\r\n        else if (Number(cardNumber.value[0]) === 6) {\r\n            bankCardImg.src = './assets/maestro.png';\r\n        }\r\n        else {\r\n            bankCardImg.src = './assets/bankCard.png';\r\n        }\r\n    }\r\n    validEmail(input) {\r\n        if (!Validator.isValidEmail(input.value)) {\r\n            input.classList.add('error');\r\n            document.querySelector('.error-email').classList.add('show');\r\n        }\r\n        else {\r\n            input.classList.remove('error');\r\n            document.querySelector('.error-email').classList.remove('show');\r\n        }\r\n    }\r\n    validPhone(input) {\r\n        if (!Validator.isValidPhone(input.value)) {\r\n            input.classList.add('error');\r\n            document.querySelector('.error-number').classList.add('show');\r\n        }\r\n        else {\r\n            input.classList.remove('error');\r\n            document.querySelector('.error-number').classList.remove('show');\r\n        }\r\n    }\r\n    validName(input) {\r\n        if (!Validator.isValidName(input.value)) {\r\n            input.classList.add('error');\r\n            document.querySelector('.error-name').classList.add('show');\r\n        }\r\n        else {\r\n            input.classList.remove('error');\r\n            document.querySelector('.error-name').classList.remove('show');\r\n        }\r\n    }\r\n    validAddress(input) {\r\n        if (!Validator.isValidAddress(input.value)) {\r\n            input.classList.add('error');\r\n            document.querySelector('.error-address').classList.add('show');\r\n        }\r\n        else {\r\n            input.classList.remove('error');\r\n            document.querySelector('.error-address').classList.remove('show');\r\n        }\r\n    }\r\n    validCardNumber(input) {\r\n        if (!Validator.isValidCardNumber(input.value)) {\r\n            input.classList.add('error');\r\n            document.querySelector('.error-card-number').classList.add('show');\r\n        }\r\n        else {\r\n            input.classList.remove('error');\r\n            document.querySelector('.error-card-number').classList.remove('show');\r\n        }\r\n    }\r\n    validThru(input) {\r\n        if (!Validator.isValidValidThru(input.value)) {\r\n            input.classList.add('error');\r\n            document.querySelector('.error-thru').classList.add('show');\r\n        }\r\n        else {\r\n            input.classList.remove('error');\r\n            document.querySelector('.error-thru').classList.remove('show');\r\n        }\r\n    }\r\n    validCvv(input) {\r\n        if (!Validator.isValidCvv(input.value)) {\r\n            input.classList.add('error');\r\n            document.querySelector('.error-cvv').classList.add('show');\r\n        }\r\n        else {\r\n            input.classList.remove('error');\r\n            document.querySelector('.error-cvv').classList.remove('show');\r\n        }\r\n    }\r\n    validThruHandler(e, validThru) {\r\n        if (e instanceof InputEvent) {\r\n            if (!e.data)\r\n                return;\r\n        }\r\n        if (e instanceof InputEvent) {\r\n            if (e.data === '/' || e.data === ' ') {\r\n                validThru.value = validThru.value.slice(0, -1);\r\n                return;\r\n            }\r\n        }\r\n        validThru.value = validThru.value.replace(/[^0-9\\/]+/g, '');\r\n        if (validThru.value.replace(/\\//g, '').length % 2 === 0 &&\r\n            validThru.value.length > 0) {\r\n            validThru.value += '/';\r\n        }\r\n        if (validThru.value.replace(/\\//g, '').length > 3) {\r\n            validThru.value = validThru.value.slice(0, -1);\r\n        }\r\n    }\r\n    cvvHandler(e, cvv) {\r\n        if (e instanceof InputEvent) {\r\n            if (!e.data)\r\n                return;\r\n        }\r\n        cvv.value = cvv.value.replace(/[^0-9]+/g, '');\r\n        if (cvv.value.length > 3) {\r\n            cvv.value = cvv.value.slice(0, -1);\r\n        }\r\n    }\r\n    buyFromProductDetails(data) {\r\n        const currentId = location.hash.split('/').slice(-1)[0];\r\n        window.location.hash = '#cart';\r\n        const itemsInCart = JSON.parse(localStorage.getItem('cart'));\r\n        if (itemsInCart) {\r\n            if (itemsInCart.inCart\r\n                .map((item) => item.id)\r\n                .includes(Number(currentId))) {\r\n            }\r\n            else {\r\n                const previousProducts = JSON.parse(localStorage.getItem('cart')).inCart || [];\r\n                if (data) {\r\n                    const currentProduct = data.find((item) => item.id === Number(currentId));\r\n                    currentProduct ? (currentProduct.count = 1) : null;\r\n                    previousProducts.push(currentProduct);\r\n                    const newData = JSON.stringify({ ['inCart']: previousProducts });\r\n                    localStorage.setItem('cart', newData);\r\n                }\r\n            }\r\n        }\r\n        {\r\n        }\r\n    }\r\n}\r\n","export const modalLayout = `\r\n<div class=\"modal-content\">\r\n    <form class=\"form\" action=\"\" novalidate>\r\n        <p class=\"form-title personal-title\">Personal Data</p>\r\n        <div class=\"form__group\">\r\n            <input type=\"text\" class=\"input input-name\" name=\"fullName\" placeholder=\"Name\">\r\n            <div class=\"error-name\">Please enter a valid name (NAME SURNAME) </div>\r\n        </div>\r\n        <div class=\"form__group\">\r\n            <input type=\"tel\" minlength=\"9\"\r\n            maxlength=\"14\" class=\"input input-number\" name=\"number\" placeholder=\"Phone number\">\r\n            <div class=\"error-number\">Please enter a valid phone number (phone number length minimum 9 and maximum 14). </div>\r\n        </div>\r\n        <div class=\"form__group\">\r\n            <input type=\"text\" class=\"input input-address\" name=\"address\" placeholder=\"Delivery address\">\r\n            <div class=\"error-address\">Please enter a valid address (Main info: Country Region City Street 45/12) </div>\r\n        </div>\r\n        <div class=\"form__group\">\r\n            <input type=\"email\" class=\"input input-email\" name=\"email\" placeholder=\"E-mail\">\r\n            <div class=\"error-email\">Please enter a valid email (name@test.com) </div>\r\n        </div>\r\n        <p class=\"form-title card-title\">Card data</p>\r\n        <div class=\"form__group card-number-wrapper\">\r\n            <input type=\"text\" class=\"input input-card-number\" name=\"card-number\" placeholder=\"Card number\">\r\n            <img src=\"./assets/bankCard.png\" class=\"bankcard-img\" width=\"80px\" height=\"50px\" alt=\"bankCard\">\r\n             </div>\r\n         <div class=\"error-card-number\">Please enter a valid payment card number. </div>\r\n        <div class=\"card-data-wrapper\">\r\n        <div>\r\n        <input type=\"text\" class=\"input input-valid-thru\" name=\"valid-thru\" placeholder=\"valid thru\">\r\n            <div class=\"error-thru\">MM/YY </div>\r\n            </div>\r\n            <div>\r\n            <input type=\"text\" class=\"input input-cvv\" name=\"cvv\" placeholder=\"CVV\">\r\n            <div class=\"error-cvv\">XXX</div>\r\n            </div>   \r\n        </div>\r\n        <button class=\"sumbit-btn\" type=\"submit\">\r\n            Confirm\r\n        </button>\r\n    </form>\r\n</div>\r\n`;\r\n","// ключ - название промокода, значение - скидка в процентах\r\nexport const promocodes = {\r\n    rss: 10,\r\n    epam: 15,\r\n    develop: 10,\r\n};\r\n","import { promocodes } from './promocodes';\r\nexport default class PromoCode {\r\n    constructor() {\r\n        this.couponInput = document.querySelector('.coupon');\r\n        this.appliedPromo = new Set(JSON.parse(localStorage.getItem('coupons')) || []);\r\n    }\r\n    listener() {\r\n        this.createList();\r\n        this.couponInput.addEventListener('input', () => {\r\n            for (let promo in promocodes) {\r\n                if (this.couponInput.value.toLowerCase() === promo) {\r\n                    this.createPromo(promo);\r\n                }\r\n                else {\r\n                    this.deletePromo(promo);\r\n                }\r\n            }\r\n        });\r\n    }\r\n    createPromo(promo) {\r\n        let wrapper = document.createElement('div'), promoElement = document.createElement('div'), applyPromoBtn = document.createElement('button');\r\n        wrapper.classList.add('wrapper');\r\n        promoElement.classList.add('find-promo');\r\n        applyPromoBtn.classList.add('apply-promo');\r\n        promoElement.textContent = `${promo} - ${promocodes[promo]}%`;\r\n        applyPromoBtn.textContent = `add`;\r\n        applyPromoBtn.addEventListener('click', () => {\r\n            this.appliedPromo.add(promo);\r\n            let array = JSON.parse(localStorage.getItem('coupons')) || [];\r\n            array.push(promo);\r\n            localStorage.setItem('coupons', JSON.stringify(array));\r\n            this.createList();\r\n        });\r\n        wrapper.append(promoElement, applyPromoBtn);\r\n        const findCoupon = document.querySelector('.find-coupon');\r\n        if (findCoupon) {\r\n            findCoupon.append(wrapper);\r\n        }\r\n    }\r\n    deletePromo(promo) {\r\n        let findCouponsWrapper = document.querySelector('.find-coupon');\r\n        let findCoupon = findCouponsWrapper.querySelector('.find-promo');\r\n        if (findCoupon && findCoupon.textContent.startsWith(promo)) {\r\n            findCoupon.closest('.wrapper').remove();\r\n        }\r\n    }\r\n    createList() {\r\n        let appliedCoupons = document.querySelector('.applied-coupons');\r\n        let promos = document.createElement('div');\r\n        promos.classList.add('promos');\r\n        let title = document.createElement('div');\r\n        appliedCoupons.innerHTML = '';\r\n        if (this.appliedPromo.size > 0) {\r\n            title.classList.add('applied-promo-title');\r\n            title.textContent = 'Applied promo';\r\n            appliedCoupons.append(title);\r\n        }\r\n        const array = Array.from(this.appliedPromo);\r\n        array.forEach((promo) => {\r\n            let wrapper = document.createElement('div');\r\n            let coupon = document.createElement('div');\r\n            let drop = document.createElement('button');\r\n            wrapper.classList.add('promo-drop__wrapper');\r\n            coupon.classList.add('promo');\r\n            drop.classList.add('drop');\r\n            coupon.textContent = `${promo} - ${promocodes[promo]}%`;\r\n            drop.textContent = 'drop';\r\n            drop.addEventListener('click', () => {\r\n                this.appliedPromo.delete(promo);\r\n                let array = JSON.parse(localStorage.getItem('coupons')) || [];\r\n                let newArray = array.filter((item) => item !== promo);\r\n                localStorage.setItem('coupons', JSON.stringify(newArray));\r\n                this.createList();\r\n            });\r\n            wrapper.append(coupon, drop);\r\n            promos.append(wrapper);\r\n        });\r\n        appliedCoupons.append(promos);\r\n        this.setNewPrice();\r\n    }\r\n    setNewPrice() {\r\n        const discountPrice = document.querySelector('.discount-price');\r\n        const buyTotalAmount = document.querySelector('.buy__total-amount');\r\n        if (this.appliedPromo.size) {\r\n            buyTotalAmount.classList.add('crossOut');\r\n            const arrayPromo = Array.from(this.appliedPromo);\r\n            const percentAmount = arrayPromo.reduce((total, promo) => {\r\n                return (total += promocodes[promo]);\r\n            }, 0);\r\n            discountPrice.textContent = `Total:   $ ${(+buyTotalAmount.textContent.slice(2) *\r\n                (1 - percentAmount / 100)).toFixed(2)}`;\r\n        }\r\n        else {\r\n            discountPrice.innerHTML = '';\r\n            buyTotalAmount.classList.remove('crossOut');\r\n        }\r\n    }\r\n}\r\n","import CartComponent from '../../components/CartComponent';\r\nimport { AbstractView } from '../AbstractView';\r\nimport { cartLayout } from './htmlCart';\r\nimport Modal from './ModalWindow';\r\nimport PromoCode from './PromoCode';\r\nclass Cart extends AbstractView {\r\n    constructor(params) {\r\n        super(params);\r\n        this.params = params;\r\n        this.setTitle('Basket');\r\n        this.cart = new CartComponent();\r\n    }\r\n    fillCartList() {\r\n        const currentCart = this.cart.getCart();\r\n        const orderEl = document.querySelector('.order');\r\n        if (currentCart && currentCart.length > 0) {\r\n            this.cart.pagination();\r\n            const limit = document.querySelector('#limit');\r\n            const limitValue = limit ? Number(limit.value) : 4;\r\n            const currentPage = document.querySelector('.pagination .active');\r\n            const currentPageValue = currentPage\r\n                ? Number(currentPage.textContent)\r\n                : 1;\r\n            const start = currentPageValue > 1 ? limitValue * currentPageValue - limitValue : 0;\r\n            let lastIndex = currentPageValue * limitValue - limitValue;\r\n            const end = start + limitValue;\r\n            const dataToShow = currentCart.slice(start, end);\r\n            this.cart.setCurrentAmountHeader();\r\n            const cartWrapper = document.querySelector('.basket-list');\r\n            orderEl ? orderEl.classList.remove('hidden') : null;\r\n            const content = dataToShow.map((item, i) => `<li class=\"basket-list-item\">\r\n          <div  class=\"basket-item-container\">\r\n          <div class=\"basket-item-number\">\r\n          <p >${currentPage && Number(currentPage) > 1 ? lastIndex : i + 1}.</p></div>\r\n           <div id=${item.id}  class = \"basket-item-photo\" style = background-image:url('${item.thumbnail}') ></div>\r\n            <div class=\"basket-item-description\">\r\n              <p>${item.title} (${item.category[0].toUpperCase() +\r\n                item.category.slice(1, item.category.length)})</p>\r\n              <p>${item.description}</p>\r\n              <p>Rating: ${item.rating}</p>\r\n            </div>\r\n            <div class=\"basket-item-price\" >\r\n              <p>$ ${item.price}.00</p>\r\n            </div>\r\n            <div id =${item.id} class=\"basket-item-count\">\r\n              <button class=\"basket-item-add\">+</button>\r\n            <div class=\"item-count-info\">\r\n              <p class=\"basket-item-stock\">Stock: ${item.stock}</p>\r\n              <p>${item.count}</p>\r\n            </div>  \r\n              <button class=\"basket-item-remove\">-</button>\r\n            </div>\r\n            <div class=\"basket-item-total\">\r\n              <p>$${item.count ? item.count * item.price : 0}.00</p>\r\n            </div>\r\n          </div>\r\n        </li>`);\r\n            cartWrapper && content.length > 0\r\n                ? (cartWrapper.innerHTML = content.reduce((a, b) => a + b))\r\n                : null;\r\n        }\r\n        else {\r\n            const cartSection = document.querySelector('.basket-products');\r\n            const textForEmpty = document.createElement('div');\r\n            textForEmpty.classList.add('basket-empty');\r\n            textForEmpty.textContent = 'Cart is empty';\r\n            if (cartSection) {\r\n                cartSection.innerHTML = '';\r\n                cartSection.append(textForEmpty);\r\n            }\r\n            orderEl ? orderEl.classList.add('hidden') : null;\r\n        }\r\n        this.cart.listenCount();\r\n        this.cart.listenCardDetails();\r\n    }\r\n    render(root, data) {\r\n        root.innerHTML = cartLayout;\r\n        this.fillCartList();\r\n        this.afterRootRender(data);\r\n    }\r\n    afterRootRender(data) {\r\n        const modalWindow = new Modal();\r\n        data ? modalWindow.listener(data.products) : modalWindow.listener();\r\n        const promo = new PromoCode();\r\n        promo.listener();\r\n    }\r\n}\r\nexport { Cart };\r\n","export const cartLayout = `\r\n<section class=\"basket-page\">\r\n    <div class=\"container\">\r\n        <h2 class=\"basket__title\">Cart</h2>\r\n        <div class=\"pagination-wrapper\">\r\n        <div class=\"pagination-limit\"></div>\r\n        <div class=\"pagination\"></div>\r\n        </div>\r\n        <div class=\"basket-products\">\r\n        <div class=\"basket-products__name\"><h4>Product</h4></div>\r\n        <div class=\"basket-products__price\"><h4>Price</h4></div>\r\n        <div class=\"basket-products__amount\"><h4>Amount</h4></div>\r\n        <div class=\"basket-products__total\"><h4>Total</h4></div>\r\n        </div>\r\n        <div ><ul class=\"basket-list\"></ul></div>\r\n        <div class=\"order\">\r\n            <div class=\"coupon__wrapper\">\r\n               <input type=\"text\" class=\"coupon\" placeholder=\"promo code (rss, epam)\">\r\n               <div class=\"find-coupon\"></div>\r\n               <div class=\"applied-coupons\"></div>\r\n            </div>\r\n            <div class=\"buy__wrapper\">\r\n              <div class=\"buy__total\"><div><p class=\"basket-amount\"></p>\r\n            </div>\r\n                  <p>Total:&nbsp;&nbsp;</p>\r\n                    <p class=\"buy__total-amount\"></p>\r\n                    <div class=\"discount-price\"></div>\r\n                </div>\r\n                <button class=\"buy__order\">BUY NOW</button>\r\n            </div>\r\n        <div>\r\n    </div>\r\n<section>`;\r\n","class Storage {\r\n    constructor(name) {\r\n        this.store = name;\r\n        this.obj = this.getAll();\r\n    }\r\n    set(key, value) {\r\n        const data = this.obj;\r\n        data[key] = value;\r\n        const newData = JSON.stringify(data);\r\n        localStorage.setItem(this.store, newData);\r\n    }\r\n    get(key) {\r\n        return this.obj[key];\r\n    }\r\n    drop(key) {\r\n        this.obj[key] && this.obj[key].length > 0\r\n            ? (this.obj[key].length = 0)\r\n            : this.obj[key];\r\n        const data = this.obj;\r\n        const newData = JSON.stringify(data);\r\n        localStorage.setItem(this.store, newData);\r\n    }\r\n    getAll() {\r\n        const data = localStorage.getItem(this.store);\r\n        return data ? JSON.parse(data) : {};\r\n    }\r\n    dropAll() {\r\n        localStorage.clear();\r\n    }\r\n}\r\nexport default Storage;\r\n","import { Cart } from '../pages/Basket/Cart';\r\nimport RouterHelper from '../utils/RouterHelper';\r\nimport Storage from '../utils/Storage';\r\nexport default class CartComponent {\r\n    constructor() {\r\n        this.storage = new Storage('cart');\r\n        this.cartData = this.storage.get('inCart') || [];\r\n    }\r\n    listenCart(allData) {\r\n        this.setCurrentAmountHeader();\r\n        const allProducts = document.querySelector('.products-items');\r\n        const productDetail = document.querySelector('.product-wrapper');\r\n        const currentContent = allProducts ? allProducts : productDetail;\r\n        if (currentContent) {\r\n            currentContent.addEventListener('click', (e) => {\r\n                this.cartData = this.storage.get('inCart') || [];\r\n                const currentId = e.target instanceof HTMLElement ? Number(e.target.id) : '';\r\n                const checkedProduct = allData.find((item) => item.id === currentId);\r\n                if (checkedProduct &&\r\n                    e.target instanceof HTMLElement &&\r\n                    e.target.className === 'card__buttons-add') {\r\n                    checkedProduct.count = 1;\r\n                    this.cartData.push(checkedProduct);\r\n                    this.storage.set('inCart', this.cartData);\r\n                    this.toggleButton(e.target, e.target.id, 'Remove from cart');\r\n                }\r\n                else if (e.target instanceof HTMLButtonElement &&\r\n                    e.target.className === 'card__buttons-remove' &&\r\n                    checkedProduct) {\r\n                    checkedProduct.count = 0;\r\n                    const id = e.target.id;\r\n                    const newData = this.cartData.filter((item) => String(item.id) !== id);\r\n                    this.storage.set('inCart', newData);\r\n                    this.toggleButton(e.target, e.target.id, 'Add to cart');\r\n                }\r\n                this.setCurrentAmountHeader();\r\n            });\r\n        }\r\n    }\r\n    listenCount() {\r\n        const cartList = document.querySelector('.basket-list');\r\n        if (cartList) {\r\n            cartList.addEventListener('click', (e) => {\r\n                if (e.target instanceof HTMLElement &&\r\n                    e.target.classList.contains('basket-item-add')) {\r\n                    const closestEl = e.target.closest('div');\r\n                    if (closestEl) {\r\n                        const currentId = Number(closestEl.id);\r\n                        this.cartData.forEach((item) => item.id === currentId &&\r\n                            item.count &&\r\n                            item.stock >= item.count + 1\r\n                            ? (item.count += 1)\r\n                            : item);\r\n                    }\r\n                    this.storage.set('inCart', this.cartData);\r\n                }\r\n                else if (e.target instanceof HTMLElement &&\r\n                    e.target.classList.contains('basket-item-remove')) {\r\n                    const closestEl = e.target.closest('div');\r\n                    if (closestEl) {\r\n                        const currentId = Number(closestEl.id);\r\n                        this.cartData.forEach((item) => {\r\n                            if (item.id === currentId && item.count && item.count > 1) {\r\n                                item.count -= 1;\r\n                                this.storage.set('inCart', this.cartData);\r\n                            }\r\n                            else if (item.id === currentId && item.count === 1) {\r\n                                const newData = this.cartData.filter((prod) => prod.id !== item.id);\r\n                                this.storage.set('inCart', newData);\r\n                            }\r\n                        });\r\n                    }\r\n                }\r\n                const view = new Cart('#cart');\r\n                const root = document.querySelector('#root');\r\n                root ? view.render(root) : null;\r\n            });\r\n        }\r\n        const totalAmount = document.querySelector('.buy__total-amount');\r\n        if (totalAmount) {\r\n            totalAmount.textContent = `$ ${this.getTotalAmount()}.00`;\r\n        }\r\n        this.setCurrentAmountHeader();\r\n    }\r\n    setCurrentAmountHeader() {\r\n        const totalAmount = this.getTotalAmount() || 0;\r\n        const amountEl = document.querySelector('#totalAmount');\r\n        if (amountEl) {\r\n            amountEl.textContent = totalAmount\r\n                ? `Total: $ ${totalAmount}`\r\n                : 'Total: $ 0';\r\n        }\r\n        this.setProductsInCart();\r\n    }\r\n    setProductsInCart() {\r\n        const cartHeader = document.querySelector('.basket-count');\r\n        const basketAmount = document.querySelector('.basket-amount');\r\n        const productInCart = this.cartData && this.cartData.length > 0\r\n            ? this.cartData\r\n                .map((item) => item.count)\r\n                .reduce((a, b) => {\r\n                if (a && b) {\r\n                    return a + b;\r\n                }\r\n            })\r\n            : 0;\r\n        if (productInCart && productInCart > 0 && cartHeader) {\r\n            cartHeader.style.display = 'block';\r\n            cartHeader.textContent = `${productInCart}`;\r\n            basketAmount\r\n                ? (basketAmount.textContent = `Products: ${productInCart}`)\r\n                : null;\r\n        }\r\n        else {\r\n            cartHeader ? (cartHeader.style.display = 'none') : null;\r\n        }\r\n    }\r\n    listenCardDetails() {\r\n        const productsList = document.querySelector('.basket-list');\r\n        if (productsList) {\r\n            productsList.addEventListener('click', (e) => {\r\n                if (e.target instanceof HTMLElement &&\r\n                    e.target.classList.contains('basket-item-photo')) {\r\n                    const id = e.target.id;\r\n                    window.location.hash = `#product-details/${id}`;\r\n                }\r\n            });\r\n        }\r\n    }\r\n    getTotalAmount() {\r\n        this.cartData = this.storage.get('inCart') || [];\r\n        const totalAmount = this.cartData && this.cartData.length > 0\r\n            ? this.cartData\r\n                .map((item) => {\r\n                if (item.count) {\r\n                    return item.price * item.count;\r\n                }\r\n            })\r\n                .reduce((prev, curr) => {\r\n                if (prev && curr) {\r\n                    return prev + curr;\r\n                }\r\n            })\r\n            : 0;\r\n        return totalAmount;\r\n    }\r\n    getCart() {\r\n        return this.storage.get('inCart') ? this.storage.get('inCart') : [];\r\n    }\r\n    toggleButton(target, id, text) {\r\n        const addedItem = document.querySelector(`.card__item.id-${id}`);\r\n        target.textContent = `${text}`;\r\n        target.classList.toggle('card__buttons-remove');\r\n        target.classList.toggle('card__buttons-add');\r\n        addedItem ? addedItem.classList.toggle('in-cart') : null;\r\n    }\r\n    pagination() {\r\n        const currentLimit = this.storage.get('limit') && this.storage.get('limit')[0]\r\n            ? this.storage.get('limit')[0]\r\n            : 4;\r\n        let currentPage = this.storage.get('page') && this.storage.get('page')[0]\r\n            ? this.storage.get('page')[0]\r\n            : 1;\r\n        const limitElement = document.querySelector('.pagination-limit');\r\n        if (limitElement) {\r\n            limitElement.innerHTML = `<label for=\"limit\">Limit: </label>\r\n        <input id=\"limit\" type=\"number\" value=\"4\" min=\"1\"/>`;\r\n        }\r\n        const inputLimit = document.querySelector('#limit');\r\n        const paginator = document.querySelector('.pagination');\r\n        if (inputLimit && paginator) {\r\n            inputLimit.value = `${currentLimit}`;\r\n            const countItems = this.getCart().length;\r\n            const itemsOnPage = inputLimit.value;\r\n            const countPages = Math.ceil(countItems / Number(itemsOnPage));\r\n            if (countPages < currentPage) {\r\n                currentPage = String(countPages);\r\n                this.storage.set('page', [currentPage]);\r\n            }\r\n            let page = '';\r\n            for (let i = 0; i < countPages; i++) {\r\n                page += `<div id=\"page${i + 1}\">${i + 1}</div>`;\r\n            }\r\n            paginator.innerHTML = page;\r\n            const prev = currentPage > 1\r\n                ? `<div class=\"prev\"><</div>`\r\n                : `<div class=\"prev0\"><</div>`;\r\n            const next = currentPage < countPages\r\n                ? `<div class=\"next\">></div> `\r\n                : `<div class=\"next-last\">></div>`;\r\n            paginator.insertAdjacentHTML('afterbegin', prev);\r\n            paginator.insertAdjacentHTML('beforeend', next);\r\n            const currentPageEl = paginator.querySelector(`#page${currentPage}`);\r\n            if (currentPageEl) {\r\n                currentPageEl.classList.add('active');\r\n            }\r\n            paginator.addEventListener('click', (e) => {\r\n                if (e.target instanceof HTMLElement &&\r\n                    !e.target.classList.contains('prev0') &&\r\n                    !e.target.classList.contains('next-last')) {\r\n                    if (e.target.id) {\r\n                        paginator\r\n                            .querySelectorAll('div')\r\n                            .forEach((item) => item.classList.remove('active'));\r\n                        e.target.classList.add('active');\r\n                        const checkedPage = e.target.textContent || '';\r\n                        this.checkPage(checkedPage);\r\n                    }\r\n                    else if (e.target.classList.contains('prev')) {\r\n                        const page = Number(currentPage) - 1;\r\n                        this.checkPage(String(page));\r\n                    }\r\n                    else if (e.target.classList.contains('next')) {\r\n                        const page = Number(currentPage) + 1;\r\n                        this.checkPage(String(page));\r\n                    }\r\n                }\r\n            });\r\n            inputLimit.addEventListener('input', (e) => {\r\n                if (e.target instanceof HTMLInputElement) {\r\n                    this.storage.set('limit', [e.target.value]);\r\n                    const currentFilters = RouterHelper.setFilter(location.hash);\r\n                    const prevHash = location.hash.includes('page')\r\n                        ? `page=${currentFilters.page[0]}&`\r\n                        : '';\r\n                    window.location.hash = `#cart/?${prevHash}limit=${e.target.value}`;\r\n                }\r\n            });\r\n        }\r\n    }\r\n    checkPage(page) {\r\n        const currentFilters = RouterHelper.setFilter(location.hash);\r\n        this.storage.set('page', [page]);\r\n        const prevHash = location.hash.includes('limit')\r\n            ? `limit=${currentFilters.limit[0]}&`\r\n            : '';\r\n        window.location.hash = `#cart/?${prevHash}page=${page}`;\r\n    }\r\n    clearStorage() {\r\n        ['limit', 'page'].forEach((item) => this.storage.drop(item));\r\n    }\r\n}\r\n","export default class PhotoListener {\r\n    listenPhoto() {\r\n        const imgBox = document.querySelector('.img-choose');\r\n        const mainPhoto = document.querySelector('.img-main');\r\n        const imgList = document.querySelectorAll('.img-choose img');\r\n        if (imgBox) {\r\n            imgBox.addEventListener('click', (e) => {\r\n                if (e.target instanceof HTMLImageElement &&\r\n                    e.target.tagName === 'IMG' &&\r\n                    mainPhoto) {\r\n                    const currentSrc = e.target.src;\r\n                    mainPhoto.src = currentSrc;\r\n                    imgList.forEach((item) => item.classList.remove('active'));\r\n                    e.target.classList.add('active');\r\n                }\r\n            });\r\n        }\r\n    }\r\n}\r\n","import { AbstractView } from '../AbstractView';\r\nimport RouterHelper from '../../utils/RouterHelper';\r\nimport ProductDetailsCard from '../../components/ProductDetailsCard';\r\nimport CartComponent from '../../components/CartComponent';\r\nimport Modal from '../Basket/ModalWindow';\r\nimport PhotoListener from '../../components/Listeners/PhotoListener';\r\nclass ProductDetails extends AbstractView {\r\n    constructor(params) {\r\n        super(params);\r\n        this.params = params;\r\n        this.setTitle('Product Details');\r\n        this.productsView = new ProductDetailsCard();\r\n        this.cart = new CartComponent();\r\n        this.modalWindow = new Modal();\r\n        this.photo = new PhotoListener();\r\n    }\r\n    showIncorrect() {\r\n        const div = document.createElement('div');\r\n        div.classList.add('not-found');\r\n        div.textContent = `Product number\r\n  ${this.params.split('/').slice(-1).join('')}\r\n    not found`;\r\n        return div;\r\n    }\r\n    getItem(data) {\r\n        const id = RouterHelper.checkId(this.params);\r\n        if (id) {\r\n            const item = data.products.filter((x) => x.id === id);\r\n            return item.length > 0 ? this.productsView.draw(item) : null;\r\n        }\r\n        else\r\n            return null;\r\n    }\r\n    afterRootRender(data) {\r\n        const productItem = this.getItem(data);\r\n        const productItemContainer = document.querySelector('.product-details');\r\n        if (productItemContainer) {\r\n            if (productItem) {\r\n                productItemContainer.append(productItem);\r\n                this.cart.listenCart(data.products);\r\n                this.modalWindow.listener(data.products);\r\n                this.photo.listenPhoto();\r\n            }\r\n            else\r\n                productItemContainer.append(this.showIncorrect());\r\n        }\r\n    }\r\n    render(root, data) {\r\n        root.innerHTML = '<div class=\"product-details container\"></div>';\r\n        this.afterRootRender(data);\r\n    }\r\n}\r\nexport { ProductDetails };\r\n","class ProductDetailsCard {\r\n    draw(data) {\r\n        const cartInStorage = localStorage.getItem('cart');\r\n        let shopInfo = {};\r\n        if (cartInStorage) {\r\n            shopInfo = JSON.parse(cartInStorage);\r\n        }\r\n        const inCart = shopInfo && shopInfo.inCart ? shopInfo.inCart : [];\r\n        const cartId = inCart.map((item) => item.id);\r\n        const fragment = document.createDocumentFragment();\r\n        const cardItemTemp = document.querySelector('#productDetails');\r\n        if (data.length === 1 && cardItemTemp instanceof HTMLTemplateElement) {\r\n            const product = data[0];\r\n            const cardClone = cardItemTemp.content.cloneNode(true);\r\n            const crumbEl = cardClone.querySelector('.crumb-category');\r\n            if (crumbEl) {\r\n                crumbEl.textContent = product.category;\r\n                crumbEl.href = `#?/category=${product.category.toLowerCase()}`;\r\n            }\r\n            const brandCrumb = cardClone.querySelector('.crumb-brand');\r\n            if (brandCrumb) {\r\n                brandCrumb.textContent = product.brand;\r\n                brandCrumb.href = `#?/brand=${product.brand.toLowerCase()}`;\r\n            }\r\n            const titleCrumb = cardClone.querySelector('.crumb-title');\r\n            if (titleCrumb) {\r\n                titleCrumb.textContent = product.title;\r\n            }\r\n            const titleEl = cardClone.querySelector('.product-item');\r\n            if (titleEl) {\r\n                titleEl.textContent = product.title;\r\n            }\r\n            const imgEl = cardClone.querySelector('.img-one');\r\n            if (imgEl) {\r\n                imgEl.src = product.images[0];\r\n            }\r\n            const imgElTwo = cardClone.querySelector('.img-two');\r\n            if (imgElTwo) {\r\n                product.id === 1\r\n                    ? (imgElTwo.src = product.images[3])\r\n                    : (imgElTwo.src = product.images[1]);\r\n            }\r\n            const imgElThree = cardClone.querySelector('.img-three');\r\n            if (imgElThree) {\r\n                imgElThree.src = product.images[2];\r\n            }\r\n            const imgMain = cardClone.querySelector('.img-main');\r\n            if (imgMain) {\r\n                imgMain.src = product.images[0];\r\n            }\r\n            const descriptionEl = cardClone.querySelector('.product-description-text');\r\n            if (descriptionEl) {\r\n                descriptionEl.textContent = product.description;\r\n            }\r\n            const ratingEl = cardClone.querySelector('.product-rating-value');\r\n            if (ratingEl) {\r\n                ratingEl.textContent = `${product.rating}`;\r\n            }\r\n            const stockEl = cardClone.querySelector('.product-stock-value');\r\n            if (stockEl) {\r\n                stockEl.textContent = `${product.stock}`;\r\n            }\r\n            const brandEl = cardClone.querySelector('.product-brand-value');\r\n            if (brandEl) {\r\n                brandEl.textContent = product.brand;\r\n            }\r\n            const categoryEl = cardClone.querySelector('.product-category-value');\r\n            if (categoryEl) {\r\n                categoryEl.textContent = product.category;\r\n            }\r\n            const priceEl = cardClone.querySelector('.product-price');\r\n            if (priceEl) {\r\n                priceEl.textContent = `Price: $${product.price}.00`;\r\n            }\r\n            const buttonAdd = cardClone.querySelector('.card__buttons-add');\r\n            if (buttonAdd) {\r\n                buttonAdd.id = `${product.id}`;\r\n            }\r\n            if (cartId.includes(product.id) && buttonAdd) {\r\n                buttonAdd.classList.remove('card__buttons-add');\r\n                buttonAdd.classList.add('card__buttons-remove');\r\n                buttonAdd.textContent = 'Remove from cart';\r\n            }\r\n            fragment.append(cardClone);\r\n            return fragment;\r\n        }\r\n        else\r\n            return null;\r\n    }\r\n}\r\nexport default ProductDetailsCard;\r\n","import { AbstractView } from '../AbstractView';\r\nclass Error extends AbstractView {\r\n    constructor(params) {\r\n        super(params);\r\n    }\r\n    afterRootRender() { }\r\n    render(root) {\r\n        const div = document.createElement('div');\r\n        div.classList.add('error-page');\r\n        const errorWrapper = document.createElement('div');\r\n        errorWrapper.textContent = `404`;\r\n        div.append(errorWrapper);\r\n        root.append(div);\r\n    }\r\n}\r\nexport default Error;\r\n","import RouterHelper from '../../utils/RouterHelper';\r\nexport default class Sort {\r\n    constructor() {\r\n        this.currentFilters = RouterHelper.setFilter(location.hash);\r\n    }\r\n    listen(count) {\r\n        this.listenSort();\r\n        this.listenFound(count);\r\n        this.listenView();\r\n    }\r\n    listenSort() {\r\n        const inputSort = document.getElementById('input');\r\n        const currentSort = this.currentFilters['sort']\r\n            ? this.currentFilters['sort'][0]\r\n            : '';\r\n        if (currentSort) {\r\n            const currentSortEl = document.querySelector(`#${currentSort}`);\r\n            currentSortEl ? currentSortEl.classList.add('selected') : null;\r\n            if (inputSort instanceof HTMLInputElement) {\r\n                const selectedSort = document.querySelector(`#${currentSort}.selected`);\r\n                if (selectedSort) {\r\n                    const sortValue = selectedSort.textContent;\r\n                    sortValue ? (inputSort.value = sortValue) : null;\r\n                }\r\n            }\r\n        }\r\n        const selectContainer = document.querySelector('.sort-bar');\r\n        const select = document.querySelector('.select');\r\n        const options = document.querySelectorAll('.sort-bar .option');\r\n        const root = document.querySelector('#root');\r\n        let checkedSort = '';\r\n        if (select && selectContainer && root) {\r\n            select.addEventListener('click', () => {\r\n                selectContainer.classList.add('active');\r\n            });\r\n            selectContainer.addEventListener('click', (e) => {\r\n                if (e.target instanceof HTMLElement) {\r\n                    const closestTarget = e.target.closest('div');\r\n                    if (e.target.classList.contains('option') ||\r\n                        (closestTarget && closestTarget.classList.contains('option'))) {\r\n                        const value = e.target.closest('div');\r\n                        options.forEach((option) => {\r\n                            option.classList.remove('selected');\r\n                            if (value && inputSort instanceof HTMLInputElement) {\r\n                                value.classList.add('selected');\r\n                                const sortValue = value.children[0].textContent;\r\n                                sortValue ? (inputSort.value = sortValue) : null;\r\n                            }\r\n                            selectContainer.classList.remove('active');\r\n                        });\r\n                        value ? (checkedSort = value.id) : null;\r\n                        this.changeHash('sort', checkedSort);\r\n                    }\r\n                }\r\n            });\r\n            root.addEventListener('click', (e) => {\r\n                const sortBar = document.querySelector('.sort-bar.active');\r\n                if (e.target instanceof HTMLElement) {\r\n                    const targetClosest = e.target.closest('div');\r\n                    if (targetClosest &&\r\n                        !targetClosest.classList.contains('select') &&\r\n                        sortBar) {\r\n                        selectContainer.classList.remove('active');\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    }\r\n    changeHash(property, value) {\r\n        const currentHash = location.hash;\r\n        if (!currentHash || currentHash.slice(3, 7) === `${property}`) {\r\n            value.length > 0\r\n                ? (window.location.hash = `#?/${property}=${value}`)\r\n                : (window.location.hash = '');\r\n        }\r\n        else {\r\n            const hash = value.length > 0 ? `&${property}=${value}` : '';\r\n            window.location.hash = `${currentHash\r\n                .split('&')\r\n                .filter((item) => item.slice(0, 4) !== `${property}`)\r\n                .join('&')}${hash}`;\r\n        }\r\n    }\r\n    listenFound(count) {\r\n        const statElement = document.querySelector('.stat-count');\r\n        statElement ? (statElement.textContent = `${count}`) : null;\r\n    }\r\n    listenView() {\r\n        const viewMode = document.querySelector('.view-mode');\r\n        const productContainer = document.querySelector('.products-items');\r\n        const currentView = this.currentFilters['view']\r\n            ? this.currentFilters['view'][0]\r\n            : '';\r\n        if (currentView) {\r\n            const viewCurrent = document.querySelector('.view-mode .active');\r\n            viewCurrent ? viewCurrent.classList.remove('active') : null;\r\n            const currentViewEl = document.querySelector(`.${currentView}`);\r\n            currentViewEl ? currentViewEl.classList.add('active') : null;\r\n            if (productContainer) {\r\n                currentView === 'two'\r\n                    ? productContainer.classList.add('big')\r\n                    : productContainer.classList.remove('big');\r\n            }\r\n        }\r\n        viewMode\r\n            ? viewMode.addEventListener('click', (e) => {\r\n                if (e.target instanceof HTMLElement) {\r\n                    if (e.target.classList.contains('active')) {\r\n                        this.changeHash('view', e.target.classList[0]);\r\n                    }\r\n                    else {\r\n                        const viewCurrent = document.querySelector('.view-mode .active');\r\n                        viewCurrent ? viewCurrent.classList.remove('active') : null;\r\n                        e.target.classList.add('active');\r\n                        if (productContainer) {\r\n                            e.target.classList.contains('two')\r\n                                ? productContainer.classList.add('big')\r\n                                : productContainer.classList.remove('big');\r\n                        }\r\n                        this.changeHash('view', e.target.classList[0]);\r\n                    }\r\n                }\r\n            })\r\n            : null;\r\n    }\r\n}\r\n","export default class PriceFilterListener {\r\n    changeHash(min, max) {\r\n        const currentHash = location.hash;\r\n        if (!currentHash || currentHash.slice(3, 8) === 'price') {\r\n            window.location.hash = `#?/price=${min.toString()}+${max.toString()}`;\r\n        }\r\n        else {\r\n            const hash = `&price=${min.toString()}+${max.toString()}`;\r\n            window.location.hash = `${currentHash\r\n                .split('&')\r\n                .filter((item) => item.slice(0, 5) !== 'price')\r\n                .join('&')}${hash}`;\r\n        }\r\n        this.validateRange(min, max);\r\n    }\r\n    validateRange(minPrice, maxPrice) {\r\n        const minPriceInput = document.querySelector('.min-price');\r\n        const maxPriceInput = document.querySelector('.max-price');\r\n        const minValue = document.getElementById('min-value-price');\r\n        const maxValue = document.getElementById('max-value-price');\r\n        if (minPriceInput && maxPriceInput && minValue && maxValue) {\r\n            if (minPrice === Infinity || minPrice === -Infinity) {\r\n                minValue.innerHTML = '—';\r\n                maxValue.innerHTML = '—';\r\n            }\r\n            else {\r\n                minValue.innerHTML = '$' + minPrice;\r\n                maxValue.innerHTML = '$' + maxPrice;\r\n            }\r\n            minPriceInput.value = `${minPrice}`;\r\n            maxPriceInput.value = `${maxPrice}`;\r\n        }\r\n    }\r\n    listenPrice(minPrice, maxPrice) {\r\n        this.validateRange(minPrice, maxPrice);\r\n        const inputElements = document.querySelectorAll('#price input[type=\"range\"]');\r\n        inputElements.forEach((input) => {\r\n            input.addEventListener('change', (e) => {\r\n                const minPrice = parseInt(inputElements[0].value) < parseInt(inputElements[1].value)\r\n                    ? parseInt(inputElements[0].value)\r\n                    : parseInt(inputElements[1].value);\r\n                const maxPrice = parseInt(inputElements[0].value) > parseInt(inputElements[1].value)\r\n                    ? parseInt(inputElements[0].value)\r\n                    : parseInt(inputElements[1].value);\r\n                this.changeHash(minPrice, maxPrice);\r\n            });\r\n            input.addEventListener('input', (e) => {\r\n                const minPrice = parseInt(inputElements[0].value) < parseInt(inputElements[1].value)\r\n                    ? parseInt(inputElements[0].value)\r\n                    : parseInt(inputElements[1].value);\r\n                const maxPrice = parseInt(inputElements[0].value) > parseInt(inputElements[1].value)\r\n                    ? parseInt(inputElements[0].value)\r\n                    : parseInt(inputElements[1].value);\r\n                this.changeHash(minPrice, maxPrice);\r\n            });\r\n        });\r\n    }\r\n}\r\n","export default class Search {\r\n    listenSearch() {\r\n        const inputSearch = document.querySelector('.search__input');\r\n        if (inputSearch) {\r\n            inputSearch.addEventListener('input', (e) => {\r\n                e.preventDefault();\r\n                if (e.target instanceof HTMLInputElement) {\r\n                    this.changeHash(e.target.value.toLowerCase());\r\n                }\r\n            });\r\n        }\r\n    }\r\n    changeHash(text) {\r\n        const currentHash = location.hash;\r\n        if (!currentHash || currentHash.slice(3, 9) === 'search') {\r\n            text.length > 0\r\n                ? (window.location.hash = `#?/search=${text}`)\r\n                : (window.location.hash = '');\r\n        }\r\n        else {\r\n            const hash = text.length > 0 ? `&search=${text}` : '';\r\n            window.location.hash = `${currentHash\r\n                .split('&')\r\n                .filter((item) => item.slice(0, 6) !== 'search')\r\n                .join('&')}${hash}`;\r\n        }\r\n    }\r\n}\r\n","export default class StockFilterListener {\r\n    changeHash(min, max) {\r\n        const currentHash = location.hash;\r\n        if (!currentHash || currentHash.slice(3, 8) === 'stock') {\r\n            window.location.hash = `#?/stock=${min.toString()}+${max.toString()}`;\r\n        }\r\n        else {\r\n            const hash = `&stock=${min.toString()}+${max.toString()}`;\r\n            window.location.hash = `${currentHash\r\n                .split('&')\r\n                .filter((item) => item.slice(0, 5) !== 'stock')\r\n                .join('&')}${hash}`;\r\n        }\r\n        this.validateRange(min, max);\r\n    }\r\n    validateRange(minStock, maxStock) {\r\n        const minStockInput = document.querySelector('.min-stock');\r\n        const maxStockInput = document.querySelector('.max-stock');\r\n        const minValue = document.getElementById('min-value-stock');\r\n        const maxValue = document.getElementById('max-value-stock');\r\n        if (minValue && maxValue && minStockInput && maxStockInput) {\r\n            if (minStock === Infinity || minStock === -Infinity) {\r\n                minValue.innerHTML = '—';\r\n                maxValue.innerHTML = '—';\r\n            }\r\n            else {\r\n                minValue.innerHTML = `${minStock}`;\r\n                maxValue.innerHTML = `${maxStock}`;\r\n            }\r\n            minStockInput.value = `${minStock}`;\r\n            maxStockInput.value = `${maxStock}`;\r\n        }\r\n    }\r\n    listenStock(minStock, maxStock) {\r\n        this.validateRange(minStock, maxStock);\r\n        const inputElements = document.querySelectorAll('#stock input[type=\"range\"]');\r\n        inputElements.forEach((input) => {\r\n            input.addEventListener('change', (e) => {\r\n                const minStock = parseInt(inputElements[0].value) < parseInt(inputElements[1].value)\r\n                    ? parseInt(inputElements[0].value)\r\n                    : parseInt(inputElements[1].value);\r\n                const maxStock = parseInt(inputElements[0].value) > parseInt(inputElements[1].value)\r\n                    ? parseInt(inputElements[0].value)\r\n                    : parseInt(inputElements[1].value);\r\n                this.changeHash(minStock, maxStock);\r\n            });\r\n            input.addEventListener('input', (e) => {\r\n                const minStock = parseInt(inputElements[0].value) < parseInt(inputElements[1].value)\r\n                    ? parseInt(inputElements[0].value)\r\n                    : parseInt(inputElements[1].value);\r\n                const maxStock = parseInt(inputElements[0].value) > parseInt(inputElements[1].value)\r\n                    ? parseInt(inputElements[0].value)\r\n                    : parseInt(inputElements[1].value);\r\n                this.changeHash(minStock, maxStock);\r\n            });\r\n        });\r\n    }\r\n}\r\n","export default class UrlCopyListener {\r\n    listen() {\r\n        const copyBtn = document.querySelector('.copy');\r\n        if (copyBtn) {\r\n            copyBtn.addEventListener('click', () => {\r\n                let tempInput = document.createElement('input');\r\n                copyBtn.textContent = 'Copied!';\r\n                setTimeout(() => {\r\n                    copyBtn.textContent = 'Copy link';\r\n                }, 600);\r\n                tempInput.value = window.location.href;\r\n                if (copyBtn.parentNode && tempInput.parentNode) {\r\n                    copyBtn.parentNode.appendChild(tempInput);\r\n                    tempInput.select();\r\n                    document.execCommand('copy');\r\n                    tempInput.parentNode.removeChild(tempInput);\r\n                }\r\n            });\r\n        }\r\n    }\r\n}\r\n","export default class Sort {\r\n    static directSort(data, field) {\r\n        return data.sort((a, b) => Number(a[field]) - Number(b[field]));\r\n    }\r\n    static reverseSort(data, field) {\r\n        return data.sort((a, b) => Number(b[field]) - Number(a[field]));\r\n    }\r\n}\r\n","import ProductCards from '../../components/ProductCards';\r\nimport { AbstractView } from '../AbstractView';\r\nimport RouterHelper from '../../utils/RouterHelper';\r\nimport { homeRoot } from './htmlData';\r\nimport AllListener from '../../components/Listeners/AllListener';\r\nimport CartComponent from '../../components/CartComponent';\r\nimport Sort from '../../utils/Sort';\r\nclass Home extends AbstractView {\r\n    constructor(params) {\r\n        super(params);\r\n        this.setTitle('Home');\r\n        this.productsView = new ProductCards();\r\n        this.listener = new AllListener();\r\n        this.currentFilters = RouterHelper.setFilter(this.params);\r\n        this.cart = new CartComponent();\r\n        this.minPrice = 0;\r\n        this.maxPrice = 0;\r\n        this.minStock = 0;\r\n        this.maxStock = 0;\r\n    }\r\n    getCategoryProducts(data) {\r\n        let keys = Object.keys(this.currentFilters);\r\n        let productsList = data;\r\n        keys.forEach((key) => {\r\n            productsList = productsList.filter((item) => {\r\n                if (key === 'price' && this.currentFilters[key] != undefined) {\r\n                    this.minPrice = Number(this.currentFilters[key][0]);\r\n                    this.maxPrice = Number(this.currentFilters[key][1]);\r\n                    return (item.price >= Number(this.currentFilters[key][0]) &&\r\n                        item.price <= Number(this.currentFilters[key][1]));\r\n                }\r\n                else if (key === 'stock') {\r\n                    this.minStock = Number(this.currentFilters[key][0]);\r\n                    this.maxStock = Number(this.currentFilters[key][1]);\r\n                    return (item.stock >= Number(this.currentFilters[key][0]) &&\r\n                        item.stock <= Number(this.currentFilters[key][1]));\r\n                }\r\n                else if (key === 'search') {\r\n                    return (item.title\r\n                        .toLowerCase()\r\n                        .includes(String(this.currentFilters[key][0])) ||\r\n                        item.description\r\n                            .toLowerCase()\r\n                            .includes(String(this.currentFilters[key][0])) ||\r\n                        String(item.price) === this.currentFilters[key][0] ||\r\n                        String(item.count) === this.currentFilters[key][0]);\r\n                }\r\n                else if (key === 'sort') {\r\n                    return item;\r\n                }\r\n                else if (key === 'view') {\r\n                    return item;\r\n                }\r\n                else if (key === 'brand') {\r\n                    return this.currentFilters[key].includes(item[key].split(' ').join('-').toLowerCase());\r\n                }\r\n                else if (key === 'category') {\r\n                    return this.currentFilters[key].includes(item[key]);\r\n                }\r\n            });\r\n            if (key === 'sort') {\r\n                this.sortData(productsList);\r\n            }\r\n        });\r\n        return productsList;\r\n    }\r\n    afterRootRender(data) {\r\n        this.cart.clearStorage();\r\n        const productsList = this.getCategoryProducts(data.products);\r\n        const productsElement = this.productsView.draw(productsList);\r\n        const productListContainer = document.querySelector('.products-items');\r\n        if (productsElement) {\r\n            if (productListContainer) {\r\n                productListContainer.append(productsElement);\r\n            }\r\n        }\r\n        else {\r\n            const wrapper = document.createElement('div');\r\n            wrapper.classList.add('not__found');\r\n            if (productListContainer) {\r\n                productListContainer.append(wrapper);\r\n            }\r\n        }\r\n        const maxPrice = Math.max(...productsList.map((item) => item.price));\r\n        const minPrice = Math.min(...productsList.map((item) => item.price));\r\n        const maxStock = Math.max(...productsList.map((item) => item.stock));\r\n        const minStock = Math.min(...productsList.map((item) => item.stock));\r\n        this.listener.listenDynamicData(this.minPrice ? this.minPrice : minPrice, this.maxPrice ? this.maxPrice : maxPrice, this.minStock ? this.minStock : minStock, this.maxStock ? this.maxStock : maxStock, productsList.length);\r\n    }\r\n    render(root, data) {\r\n        const categories = new Set(data.products.map((item) => item.category));\r\n        const brands = new Set(data.products.map((item) => item.brand.toLowerCase()));\r\n        root.innerHTML = homeRoot;\r\n        this.renderFilterData(categories, brands);\r\n        this.listener.listenStaticData(data.products);\r\n        this.afterRootRender(data);\r\n    }\r\n    renderFilterData(categories, brands) {\r\n        const categoryContainer = document.querySelector('#category');\r\n        const brandContainer = document.querySelector('#brand');\r\n        categories.forEach((item) => {\r\n            const div = document.createElement('div');\r\n            div.innerHTML = `\r\n  <input\r\n    type=\"checkbox\"\r\n    id=${item.toLowerCase()}\r\n    name=\"category\"\r\n    value=${item.toLowerCase()}\r\n  /><label class=\"filters__box-label\" for=${item.toLowerCase()}\r\n    >${item[0].toUpperCase() + item.slice(1, item.length).toLowerCase()}</label>`;\r\n            if (categoryContainer) {\r\n                categoryContainer.append(div);\r\n            }\r\n        });\r\n        brands.forEach((item) => {\r\n            const div = document.createElement('div');\r\n            div.innerHTML = `\r\n  <input\r\n    type=\"checkbox\"\r\n    id=${item.toLowerCase()}\r\n    name=\"brand\"\r\n    value=${item.split(' ').join('-')}\r\n  /><label class=\"filters__box-label\" for=${item.toLowerCase()}\r\n    >${item[0].toUpperCase() + item.slice(1, item.length).toLowerCase()}</label>`;\r\n            if (brandContainer) {\r\n                brandContainer.append(div);\r\n            }\r\n        });\r\n    }\r\n    sortData(data) {\r\n        switch (this.currentFilters['sort'][0]) {\r\n            case 'price-asc':\r\n                data = Sort.directSort(data, 'price');\r\n                break;\r\n            case 'price-desc':\r\n                data = Sort.reverseSort(data, 'price');\r\n                break;\r\n            case 'rating-asc':\r\n                data = Sort.directSort(data, 'rating');\r\n                break;\r\n            case 'rating-desc':\r\n                data = Sort.reverseSort(data, 'rating');\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n}\r\nexport { Home };\r\n","class ProductCards {\r\n    draw(data) {\r\n        const products = data;\r\n        const cartInStorage = localStorage.getItem('cart');\r\n        let shopInfo = {};\r\n        if (cartInStorage) {\r\n            shopInfo = JSON.parse(cartInStorage);\r\n        }\r\n        const inCart = shopInfo && shopInfo.inCart ? shopInfo.inCart : [];\r\n        const cartId = inCart.map((item) => item.id);\r\n        const fragment = document.createDocumentFragment();\r\n        const cardItemTemp = document.querySelector('#cardTemplate');\r\n        if (products.length > 0 && cardItemTemp) {\r\n            products.forEach((item, idx) => {\r\n                const cardClone = cardItemTemp.content.cloneNode(true);\r\n                cardClone.children[0].classList.add(`id-${item.id}`);\r\n                const imgEl = cardClone.querySelector('.card__body-photo');\r\n                if (imgEl) {\r\n                    imgEl.src = item.thumbnail;\r\n                }\r\n                const titleEl = cardClone.querySelector('.card__body-title');\r\n                if (titleEl) {\r\n                    titleEl.textContent = item.title;\r\n                }\r\n                const brandEl = cardClone.querySelector('.list__item-brand');\r\n                if (brandEl) {\r\n                    brandEl.textContent = `${item.brand}`;\r\n                }\r\n                const priceEl = cardClone.querySelector('.list__item-price');\r\n                if (priceEl) {\r\n                    priceEl.textContent = `${item.price} $`;\r\n                }\r\n                const ratingEl = cardClone.querySelector('.list__item-rating');\r\n                if (ratingEl) {\r\n                    ratingEl.innerHTML = `Rating: <strong>${item.rating}</strong>`;\r\n                }\r\n                const buttonAdd = cardClone.querySelector('.card__buttons-add');\r\n                if (buttonAdd) {\r\n                    buttonAdd.id = `${item.id}`;\r\n                }\r\n                const linkEl = cardClone.querySelector('.card__link-details');\r\n                if (linkEl) {\r\n                    linkEl.href = `#product-details/${item.id}`;\r\n                }\r\n                if (cartId.includes(item.id)) {\r\n                    cardClone.children[0].classList.add('in-cart');\r\n                    const button = cardClone.querySelector('.card__buttons-add');\r\n                    if (button) {\r\n                        button.classList.remove('card__buttons-add');\r\n                        button.classList.add('card__buttons-remove');\r\n                        button.textContent = 'Remove from cart';\r\n                    }\r\n                }\r\n                fragment.append(cardClone);\r\n            });\r\n            return fragment;\r\n        }\r\n        else\r\n            return null;\r\n    }\r\n}\r\nexport default ProductCards;\r\n","import CartComponent from '../CartComponent';\r\nimport Sort from '../Sort/Sort';\r\nimport FilterListener from './FilterListener';\r\nimport PriceFilterListener from './PriceFilterSlider';\r\nimport Search from './SearchListener';\r\nimport StockFilterListener from './StockFilterSlider';\r\nimport UrlCopyListener from './UrlCopyListener';\r\nclass AllListener {\r\n    constructor() {\r\n        this.listenDynamicData = (minPrice, maxPrice, minStock, maxStock, count) => {\r\n            this.price.listenPrice(minPrice, maxPrice);\r\n            this.stock.listenStock(minStock, maxStock);\r\n            this.sort.listen(count);\r\n        };\r\n        this.search = new Search();\r\n        this.price = new PriceFilterListener();\r\n        this.stock = new StockFilterListener();\r\n        this.sort = new Sort();\r\n        this.filters = new FilterListener();\r\n        this.cart = new CartComponent();\r\n        this.copyUrl = new UrlCopyListener();\r\n    }\r\n    listenStaticData(data) {\r\n        this.filters.listen();\r\n        this.search.listenSearch();\r\n        this.cart.listenCart(data);\r\n        this.copyUrl.listen();\r\n        if (location.hash.length < 1) {\r\n            this.clearFilters();\r\n        }\r\n    }\r\n    clearFilters() {\r\n        this.filters.clearFilters();\r\n    }\r\n}\r\nexport default AllListener;\r\n","import Storage from '../../utils/Storage';\r\nimport RouterHelper from '../../utils/RouterHelper';\r\nclass FilterListener {\r\n    constructor() {\r\n        this.listen = () => {\r\n            this.addChecked();\r\n            const filtersBox = document.querySelector('.filters__box');\r\n            if (filtersBox) {\r\n                filtersBox.addEventListener('change', (e) => {\r\n                    if (e.target instanceof HTMLInputElement) {\r\n                        if (this.filters.includes(e.target.name)) {\r\n                            const allCheckedInputs = document.querySelectorAll(`[name=${e.target.name}]:checked`);\r\n                            const checkedValues = [];\r\n                            allCheckedInputs.forEach((name) => {\r\n                                checkedValues.push(name.value);\r\n                            });\r\n                            this.storage.set(`${e.target.name}`, checkedValues);\r\n                            const currentFilters = this.storage.getAll();\r\n                            let hash = `#?/`;\r\n                            const currentHash = window.location.hash;\r\n                            const hashToAdd = currentHash\r\n                                .slice(3, currentHash.length)\r\n                                .split('&')\r\n                                .filter((item) => item.slice(0, 5) === 'price' || item.slice(0, 5) === 'stock');\r\n                            this.filters.forEach((item, i) => {\r\n                                if (currentFilters[item] && currentFilters[item].length > 0) {\r\n                                    hash += `${i > 0 && hash.length > 3 ? '&' : ''}${item}=${currentFilters[item].join('+')}`;\r\n                                }\r\n                            });\r\n                            hashToAdd.forEach((item) => (hash += `&${item}`));\r\n                            hash[3] === '&' ? (hash = hash.replace('&', '')) : hash;\r\n                            window.location.hash = hash.length === 3 ? '' : hash;\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n            const buttonRemove = document.querySelector('#remove');\r\n            if (buttonRemove) {\r\n                buttonRemove.addEventListener('click', (e) => {\r\n                    if (e.target instanceof HTMLElement) {\r\n                        const closestEl = e.target.closest('div');\r\n                        if (closestEl && closestEl.id === 'remove') {\r\n                            this.clearFilters();\r\n                            window.location.hash = '';\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n        };\r\n        this.addChecked = () => {\r\n            let currentFilters = RouterHelper.setFilter(location.hash);\r\n            this.filters.forEach((filter) => {\r\n                if (currentFilters[filter]) {\r\n                    const inputs = document.querySelectorAll(`[name=${filter}]`);\r\n                    inputs.forEach((input) => {\r\n                        if (currentFilters[filter].includes(input.value)) {\r\n                            input.checked = true;\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n        };\r\n        this.filters = [\r\n            \"category\" /* Filters.Category */,\r\n            \"brand\" /* Filters.Brand */,\r\n            \"price\" /* Filters.Price */,\r\n            \"stock\" /* Filters.Stock */,\r\n        ];\r\n        this.storage = new Storage('shop');\r\n    }\r\n    clearFilters() {\r\n        this.filters.forEach((filter) => this.storage.drop(filter));\r\n        const allCheckedInputs = document.querySelectorAll(`[type=\"checkbox\"]:checked`);\r\n        allCheckedInputs.forEach((input) => (input.checked = false));\r\n    }\r\n}\r\nexport default FilterListener;\r\n","export const homeRoot = `<section class=\"products container\">\r\n<aside class=\"products__filter\">\r\n  <div class=\"filters__box\">\r\n  <div>\r\n   <h3>Category</h3>\r\n    <div id=\"category\">\r\n       </div>\r\n    </div>\r\n    <div>\r\n      <h3>Brand</h3>\r\n       <div id=\"brand\">\r\n        </div>\r\n    </div>\r\n      <div id=\"price\">\r\n      <h3>Price</h3>\r\n      <div class=\"price__content\">\r\n        <div class=\"value-field\">\r\n          <label class=\"price__content-label\">Min:</label>\r\n          <p id=\"min-value-price\">$0</p>\r\n        </div>\r\n        <div class=\"value-field\">\r\n          <label class=\"price__content-label\">Max:</label>\r\n          <p id=\"max-value-price\">$1749</p>\r\n        </div>\r\n      </div>\r\n      <div class=\"range-slider\">\r\n        <input\r\n          type=\"range\"\r\n          class=\"min-price\"\r\n          value=\"0\"\r\n          min=\"0\"\r\n          max=\"1749\"\r\n          step=\"1\"\r\n        />\r\n        <input type=\"range\" class=\"max-price\" value=\"0 min=\"0\" max=\"1749\"\r\n        step=\"1\">\r\n      </div>\r\n    </div>\r\n    <div id=\"stock\">\r\n      <h3>Stock</h3>\r\n      <div class=\"stock__content\">\r\n        <div class=\"value-field\">\r\n          <label class=\"stock__content-label\">Min:</label>\r\n          <p id=\"min-value-stock\">0</p>\r\n        </div>\r\n\r\n        <div class=\"value-field\">\r\n          <label class=\"stock__content-label\">Max:</label>\r\n          <p id=\"max-value-stock\">0</p>\r\n        </div>\r\n      </div>\r\n      <div class=\"range-slider\">\r\n        <input\r\n          type=\"range\"\r\n          class=\"min-stock\"\r\n          value=\"0\"\r\n          min=\"0\"\r\n          max=\"150\"\r\n          step=\"1\"\r\n        />\r\n        <input type=\"range\" class=\"max-stock\" value=\"0 min=\"0\" max=\"150\"\r\n        step=\"1\">\r\n      </div>\r\n      <div id=\"remove\">\r\n        <button class=\"filters__box-remove\">Remove all filters</button>\r\n      </div>\r\n      <div class=\"copy__wrapper\">\r\n        <button class=\"copy\">Copy link</button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</aside>\r\n<div class=\"products__wrapper\">\r\n<div class=\"sort-products\">  \r\n<div class=\"sort-bar\">\r\n<div class=\"select\">\r\n<input type=\"select-text\" id=\"input\" readonly placeholder=\"Sort options\">\r\n</div>\r\n<div class=\"option-container\">\r\n<div class=\"option\" id = \"price-ASC\">\r\n    <label > Sort by price ASC </label>\r\n</div>\r\n<div class=\"option\" id = \"price-DESC\">\r\n    <label>Sort by price DESC</label>\r\n</div>\r\n<div class=\"option\" id = \"rating-ASC\">\r\n    <label>Sort by rating ASC</label>\r\n</div>\r\n<div class=\"option\" id = \"rating-DESC\">\r\n    <label>Sort by rating DESC</label>\r\n</div>\r\n\r\n</div>\r\n</div>\r\n\r\n<div class=\"stat\"><p>Found:&nbsp;&nbsp;</p><p class=\"stat-count\">4</p></div>\r\n<div class=\"search-bar\">\r\n<input class=\"search__input\" type=\"search\" placeholder=\"Search..\" />\r\n</div>\r\n<div class=\"view-mode\">\r\n<div class=\"three active\"></div><div class=\"two\"></div></div>\r\n</div>\r\n <div class=\"products-items\"></div>\r\n</div>\r\n</section>\r\n`;\r\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nexport default class ProductsData {\r\n    static getData(url) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const response = yield fetch(url);\r\n            const data = yield response.json();\r\n            return data;\r\n        });\r\n    }\r\n}\r\n","export default class Header {\r\n    static listener() {\r\n        const header = document.querySelector('header');\r\n        header\r\n            ? header.addEventListener('click', (e) => {\r\n                if (e.target instanceof HTMLElement) {\r\n                    if (e.target.classList.contains('basket')) {\r\n                        window.location.hash = '#cart';\r\n                    }\r\n                    if (e.target.classList.contains('logo')) {\r\n                        window.location.hash = '';\r\n                    }\r\n                }\r\n            })\r\n            : null;\r\n    }\r\n}\r\n","import App from './components/App';\r\nimport './styles/main.scss';\r\nconst app = new App();\r\napp.start();\r\n","import Router from '../utils/Router';\r\nimport Header from '../components/Header';\r\nexport default class App {\r\n    start() {\r\n        const routing = new Router();\r\n        window.addEventListener('popstate', routing.router);\r\n        document.addEventListener('DOMContentLoaded', () => {\r\n            document.body.addEventListener('click', (e) => {\r\n                const { target } = e;\r\n                if (target instanceof HTMLLinkElement &&\r\n                    target.matches('[data-link]')) {\r\n                    e.preventDefault();\r\n                    routing.navigateTo(target.href);\r\n                }\r\n            });\r\n            routing.router();\r\n            Header.listener();\r\n        });\r\n    }\r\n}\r\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport { ProductDetails } from '../pages/ProductDetails/ProductDetails';\r\nimport Error from '../pages/404/404';\r\nimport { Cart } from '../pages/Basket/Cart';\r\nimport { Home } from '../pages/Home/Home';\r\nimport ProductsData from './ProductsData';\r\nclass Router {\r\n    constructor() {\r\n        this.root = document.querySelector('#root');\r\n    }\r\n    router() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const routes = [\r\n                { path: '/', view: Home },\r\n                { path: '#product-details', view: ProductDetails },\r\n                { path: '#?', view: Home },\r\n                { path: '#cart', view: Cart },\r\n            ];\r\n            const data = ProductsData.getData('https://dummyjson.com/products?limit=100');\r\n            const currentProducts = yield data;\r\n            const hash = location.hash.toLocaleLowerCase() || '/';\r\n            const isAppRoute = () => {\r\n                if (hash === '/') {\r\n                    return 0;\r\n                }\r\n                else {\r\n                    const hashStart = hash.split('/').slice(0, 1).join('');\r\n                    let matchInd;\r\n                    routes.forEach((route, i) => {\r\n                        if (route.path.startsWith(hashStart)) {\r\n                            matchInd = i;\r\n                        }\r\n                    });\r\n                    return matchInd;\r\n                }\r\n            };\r\n            const pathInd = isAppRoute();\r\n            const productList = document.querySelector('.products-items');\r\n            const view = pathInd !== undefined && pathInd >= 0\r\n                ? new routes[pathInd].view(hash)\r\n                : new Error(hash);\r\n            if ((pathInd === 0 || pathInd === 2) &&\r\n                hash.length > 3 &&\r\n                productList &&\r\n                currentProducts.products.length > 0) {\r\n                productList.innerHTML = '';\r\n                view.afterRootRender(currentProducts);\r\n            }\r\n            else {\r\n                if (this.root && currentProducts.products.length > 0) {\r\n                    this.root.innerHTML = '';\r\n                    view.render(this.root, currentProducts);\r\n                }\r\n            }\r\n        });\r\n    }\r\n    navigateTo(url) {\r\n        history.pushState(null, '', url);\r\n        this.router();\r\n    }\r\n}\r\nexport default Router;\r\n"],"names":["AbstractView","constructor","params","this","setTitle","title","document","render","root","data","RouterHelper","checkId","path","pathArray","split","length","Number","slice","join","setFilter","includes","filtersString","replace","filters","forEach","elem","key","valuesString","values","Validator","static","name","nameArray","filter","part","number","String","test","address","addressArray","email","toLowerCase","cardNumber","isCreditCardNumber","validThru","validThruArray","cvv","ccn","cnnArr","toString","n","map","item","i","itemNumber","reduce","prev","curr","Modal","getElementById","listener","modal","querySelector","addEventListener","location","hash","buyFromProductDetails","createModal","form","inputName","inputNumber","inputAddress","inputEmail","inputValidThru","inputCvv","event","preventDefault","isValidForm","e","validName","currentValue","target","value","validPhone","validAddress","validEmail","validCardNumber","cardNumberHandler","validThruHandler","cvvHandler","validCvv","isValidValidThru","classList","remove","add","isValidCvv","window","currentTarget","className","createElement","innerHTML","after","inputCardNumber","isValid","querySelectorAll","localStorage","clear","modalContent","style","top","InputEvent","bankCardImg","src","input","isValidEmail","isValidPhone","isValidName","isValidAddress","isValidCardNumber","currentId","itemsInCart","JSON","parse","getItem","inCart","id","previousProducts","currentProduct","find","count","push","newData","stringify","setItem","promocodes","rss","epam","develop","PromoCode","couponInput","appliedPromo","Set","createList","promo","createPromo","deletePromo","wrapper","promoElement","applyPromoBtn","textContent","array","append","findCoupon","startsWith","closest","appliedCoupons","promos","size","Array","from","coupon","drop","delete","newArray","setNewPrice","discountPrice","buyTotalAmount","percentAmount","total","toFixed","Cart","super","cart","CartComponent","fillCartList","currentCart","getCart","orderEl","pagination","limit","limitValue","currentPage","currentPageValue","start","lastIndex","end","dataToShow","setCurrentAmountHeader","cartWrapper","content","thumbnail","category","toUpperCase","description","rating","price","stock","a","b","cartSection","textForEmpty","listenCount","listenCardDetails","afterRootRender","modalWindow","products","store","obj","getAll","set","get","dropAll","storage","cartData","listenCart","allData","allProducts","productDetail","currentContent","HTMLElement","checkedProduct","toggleButton","HTMLButtonElement","cartList","contains","closestEl","prod","view","totalAmount","getTotalAmount","amountEl","setProductsInCart","cartHeader","basketAmount","productInCart","display","productsList","text","addedItem","toggle","currentLimit","limitElement","inputLimit","paginator","countItems","itemsOnPage","countPages","Math","ceil","page","next","insertAdjacentHTML","currentPageEl","checkedPage","checkPage","HTMLInputElement","currentFilters","prevHash","clearStorage","PhotoListener","listenPhoto","imgBox","mainPhoto","imgList","HTMLImageElement","tagName","currentSrc","ProductDetails","productsView","draw","cartInStorage","shopInfo","cartId","fragment","createDocumentFragment","cardItemTemp","HTMLTemplateElement","product","cardClone","cloneNode","crumbEl","href","brandCrumb","brand","titleCrumb","titleEl","imgEl","images","imgElTwo","imgElThree","imgMain","descriptionEl","ratingEl","stockEl","brandEl","categoryEl","priceEl","buttonAdd","photo","showIncorrect","div","x","productItem","productItemContainer","errorWrapper","Sort","listen","listenSort","listenFound","listenView","inputSort","currentSort","currentSortEl","selectedSort","sortValue","selectContainer","select","options","checkedSort","closestTarget","option","children","changeHash","sortBar","targetClosest","property","currentHash","statElement","viewMode","productContainer","currentView","viewCurrent","currentViewEl","PriceFilterListener","min","max","validateRange","minPrice","maxPrice","minPriceInput","maxPriceInput","minValue","maxValue","Infinity","listenPrice","inputElements","parseInt","Search","listenSearch","inputSearch","StockFilterListener","minStock","maxStock","minStockInput","maxStockInput","listenStock","UrlCopyListener","copyBtn","tempInput","setTimeout","parentNode","appendChild","execCommand","removeChild","field","sort","Home","idx","linkEl","button","listenDynamicData","search","addChecked","filtersBox","allCheckedInputs","checkedValues","hashToAdd","buttonRemove","clearFilters","checked","copyUrl","listenStaticData","getCategoryProducts","keys","Object","undefined","sortData","productsElement","productListContainer","categories","brands","renderFilterData","categoryContainer","brandContainer","ProductsData","url","thisArg","_arguments","generator","response","fetch","json","P","Promise","resolve","reject","fulfilled","step","rejected","result","done","then","apply","Header","header","routing","router","routes","getData","currentProducts","toLocaleLowerCase","pathInd","hashStart","matchInd","route","isAppRoute","productList","navigateTo","history","pushState","body","HTMLLinkElement","matches"],"sourceRoot":""}