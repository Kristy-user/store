{"version":3,"file":"index.js","mappings":"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","sources":["webpack://my-webpack-project/./src/pages/AbstractView.ts","webpack://my-webpack-project/./src/utils/RouterHelper.ts","webpack://my-webpack-project/./src/utils/Validator.ts","webpack://my-webpack-project/./src/pages/Basket/ModalWindow.ts","webpack://my-webpack-project/./src/pages/Basket/htmlModal.ts","webpack://my-webpack-project/./src/pages/Basket/promocodes.ts","webpack://my-webpack-project/./src/pages/Basket/PromoCode.ts","webpack://my-webpack-project/./src/pages/Basket/Cart.ts","webpack://my-webpack-project/./src/pages/Basket/htmlCart.ts","webpack://my-webpack-project/./src/utils/Storage.ts","webpack://my-webpack-project/./src/components/CartComponent.ts","webpack://my-webpack-project/./src/components/Listeners/PhotoListener.ts","webpack://my-webpack-project/./src/pages/ProductDetails/ProductDetails.ts","webpack://my-webpack-project/./src/components/ProductDetailsCard.ts","webpack://my-webpack-project/./src/pages/404/404.ts","webpack://my-webpack-project/./src/components/Sort/Sort.ts","webpack://my-webpack-project/./src/components/Listeners/PriceFilterSlider.ts","webpack://my-webpack-project/./src/components/Listeners/SearchListener.ts","webpack://my-webpack-project/./src/components/Listeners/StockFilterSlider.ts","webpack://my-webpack-project/./src/components/Listeners/UrlCopyListener.ts","webpack://my-webpack-project/./src/utils/Sort.ts","webpack://my-webpack-project/./src/pages/Home/Home.ts","webpack://my-webpack-project/./src/components/ProductCards.ts","webpack://my-webpack-project/./src/components/Listeners/AllListener.ts","webpack://my-webpack-project/./src/components/Listeners/FilterListener.ts","webpack://my-webpack-project/./src/pages/Home/htmlData.ts","webpack://my-webpack-project/./src/utils/ProductsData.ts","webpack://my-webpack-project/./src/components/Header.ts","webpack://my-webpack-project/./src/index.ts","webpack://my-webpack-project/./src/components/App.ts","webpack://my-webpack-project/./src/utils/Router.ts"],"sourcesContent":["class AbstractView {\r\n    constructor(params) {\r\n        this.params = params;\r\n    }\r\n    setTitle(title) {\r\n        document.title = title;\r\n    }\r\n    render(root, data) { }\r\n}\r\nexport { AbstractView };\r\n","class RouterHelper {\r\n}\r\nRouterHelper.checkId = (path) => {\r\n    const pathArray = path.split('/');\r\n    if (pathArray.length !== 2) {\r\n        return false;\r\n    }\r\n    const id = Number(pathArray.slice(-1).join(''));\r\n    return id;\r\n};\r\nRouterHelper.setFilter = (path) => {\r\n    if (path && path.includes('?')) {\r\n        const filtersString = path.split('?')[1].replace('/', '');\r\n        const filters = {};\r\n        filtersString.split('&').forEach((elem) => {\r\n            const [key, valuesString] = elem.includes('=') ? elem.split('=') : elem;\r\n            const values = valuesString.split('+');\r\n            filters[key] = values;\r\n        });\r\n        return filters;\r\n    }\r\n    return {};\r\n};\r\nexport default RouterHelper;\r\n","export default class Validator {\r\n    static isValidName(name) {\r\n        const nameArray = name.split(' ');\r\n        if (nameArray.length < 2)\r\n            return false;\r\n        return (nameArray.filter((part) => part.length > 2).length === nameArray.length);\r\n    }\r\n    static isValidPhone(number) {\r\n        const re = /^([+ ]{2}[0-9]{9,14})?$/;\r\n        return String(number).length > 0 && re.test(String(number));\r\n    }\r\n    static isValidAddress(address) {\r\n        const addressArray = address.split(' ');\r\n        if (addressArray.length < 3)\r\n            return false;\r\n        return (addressArray.filter((part) => part.length > 4).length ===\r\n            addressArray.length);\r\n    }\r\n    static isValidEmail(email) {\r\n        const re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n        return re.test(String(email).toLowerCase());\r\n    }\r\n    static isValidCardNumber(cardNumber) {\r\n        const re = /^([0-9]{4}[ ]{1}[0-9]{4}[ ]{1}[0-9]{4}[ ]{1}[0-9]{4})?$/;\r\n        return (String(cardNumber).length > 0 &&\r\n            re.test(String(cardNumber)) &&\r\n            this.isCreditCardNumber(cardNumber));\r\n    }\r\n    static isValidValidThru(validThru) {\r\n        const validThruArray = validThru.split('/');\r\n        if (validThruArray.length === 1)\r\n            return false;\r\n        if (Number(validThruArray[0]) > 12)\r\n            return false;\r\n        return (validThruArray.filter((part) => part.length === 2).length ===\r\n            validThruArray.length);\r\n    }\r\n    static isValidCvv(cvv) {\r\n        return cvv.length === 3;\r\n    }\r\n    static isCreditCardNumber(ccn) {\r\n        const cnnArr = ccn\r\n            .toString()\r\n            .split('')\r\n            .filter((n) => n !== ' ');\r\n        const result = cnnArr.map((item, i) => {\r\n            let itemNumber = Number(item);\r\n            if ((i % 2 === 0 && cnnArr.length % 2 === 0) ||\r\n                (i % 2 && cnnArr.length % 2)) {\r\n                return itemNumber * 2 > 9 ? itemNumber * 2 - 9 : itemNumber * 2;\r\n            }\r\n            return Number(item);\r\n        });\r\n        return result.reduce((prev, curr) => prev + curr, 0) % 10 === 0;\r\n    }\r\n}\r\n","import { modalLayout } from './htmlModal';\r\nimport Validator from '../../utils/Validator';\r\nexport default class Modal {\r\n    constructor() {\r\n        this.root = document.getElementById('root');\r\n    }\r\n    listener(data) {\r\n        let modal;\r\n        const buyBtn = document.querySelector('.buy__order');\r\n        buyBtn.addEventListener('click', () => {\r\n            const hash = location.hash;\r\n            if (hash !== '#cart') {\r\n                this.buyFromProductDetails(data);\r\n            }\r\n            modal = this.createModal();\r\n            const form = document.querySelector('.form');\r\n            const cardNumber = form.querySelector('.input-card-number'), validThru = form.querySelector('.input-valid-thru'), inputName = form.querySelector('.input-name'), inputNumber = form.querySelector('.input-number'), inputAddress = form.querySelector('.input-address'), inputEmail = form.querySelector('.input-email'), inputValidThru = form.querySelector('.input-valid-thru'), inputCvv = form.querySelector('.input-cvv');\r\n            form.addEventListener('submit', (event) => {\r\n                event.preventDefault();\r\n                return this.isValidForm(inputName, inputNumber, inputAddress, inputEmail, cardNumber, inputCvv, inputValidThru);\r\n            });\r\n            if (inputName) {\r\n                inputName.addEventListener('blur', (e) => {\r\n                    this.validName(inputName);\r\n                });\r\n            }\r\n            if (inputNumber) {\r\n                inputNumber.addEventListener('focus', function (e) {\r\n                    const currentTarget = e.target;\r\n                    const currentValue = currentTarget.value;\r\n                    e.target.value = `+ ${currentValue.replace(/[^\\d.]/g, '')}`;\r\n                    // currentTarget.value = `+ ${currentValue.replace(/[^\\d.]/g, '')}`;\r\n                });\r\n            }\r\n            if (inputNumber) {\r\n                inputNumber.addEventListener('blur', (e) => {\r\n                    this.validPhone(inputNumber);\r\n                });\r\n            }\r\n            if (inputAddress) {\r\n                inputAddress.addEventListener('blur', (e) => {\r\n                    this.validAddress(inputAddress);\r\n                });\r\n            }\r\n            if (inputEmail) {\r\n                inputEmail.addEventListener('blur', (e) => {\r\n                    this.validEmail(inputEmail);\r\n                });\r\n            }\r\n            if (cardNumber) {\r\n                cardNumber.addEventListener('blur', (e) => {\r\n                    this.validCardNumber(cardNumber);\r\n                });\r\n            }\r\n            if (cardNumber) {\r\n                cardNumber.addEventListener('input', (e) => {\r\n                    this.cardNumberHandler(e, cardNumber);\r\n                });\r\n            }\r\n            if (inputValidThru) {\r\n                inputValidThru.addEventListener('input', (e) => {\r\n                    this.validThruHandler(e, validThru);\r\n                });\r\n            }\r\n            if (inputValidThru) {\r\n                inputValidThru.addEventListener('blur', () => {\r\n                    this.validThru(validThru);\r\n                });\r\n            }\r\n            if (inputCvv) {\r\n                inputCvv.addEventListener('input', (e) => {\r\n                    this.cvvHandler(e, inputCvv);\r\n                });\r\n            }\r\n            if (inputCvv) {\r\n                inputCvv.addEventListener('blur', (e) => {\r\n                    this.validCvv(inputCvv);\r\n                });\r\n            }\r\n            if (inputValidThru) {\r\n                inputValidThru.addEventListener('blur', () => {\r\n                    if (!Validator.isValidValidThru(inputValidThru.value)) {\r\n                        inputValidThru.classList.add('error');\r\n                    }\r\n                    else {\r\n                        inputValidThru.classList.remove('error');\r\n                    }\r\n                });\r\n            }\r\n            if (inputCvv) {\r\n                inputCvv.addEventListener('blur', () => {\r\n                    if (!Validator.isValidCvv(inputCvv.value)) {\r\n                        inputCvv.classList.add('error');\r\n                    }\r\n                    else {\r\n                        inputCvv.classList.remove('error');\r\n                    }\r\n                });\r\n            }\r\n        });\r\n        window.addEventListener('click', (e) => {\r\n            const currentTarget = e.target;\r\n            if (currentTarget.className === 'modal') {\r\n                currentTarget.remove();\r\n            }\r\n        });\r\n    }\r\n    createModal() {\r\n        let modal = document.createElement('div');\r\n        modal.classList.add('modal');\r\n        modal.innerHTML = modalLayout;\r\n        this.root.after(modal);\r\n        return modal;\r\n    }\r\n    isValidForm(inputName, inputNumber, inputAddress, inputEmail, inputCardNumber, inputCvv, inputValidThru) {\r\n        let isValid = true;\r\n        this.validName(inputName);\r\n        this.validPhone(inputNumber);\r\n        this.validEmail(inputEmail);\r\n        this.validAddress(inputAddress);\r\n        this.validCardNumber(inputCardNumber);\r\n        this.validThru(inputValidThru);\r\n        this.validCvv(inputCvv);\r\n        isValid = document.querySelectorAll('.error').length === 0;\r\n        if (isValid) {\r\n            localStorage.clear();\r\n            const modal = document.querySelector('.modal');\r\n            const modalContent = document.querySelector('.modal-content');\r\n            modalContent.innerHTML = '';\r\n            modalContent.style.top = '25%';\r\n            modalContent.innerHTML =\r\n                '<p class=\"info\">Thank you for your order!</p><p class=\"info\">Our manager will contact you.</p><p class=\"info\">You`ll be redirected to the main page.</p>';\r\n            setTimeout(function closeModal() {\r\n                if (modal)\r\n                    modal.remove();\r\n                window.location.hash = '';\r\n            }, 30000);\r\n        }\r\n        return isValid;\r\n    }\r\n    cardNumberHandler(e, cardNumber) {\r\n        // при удалении символов сразу возврат\r\n        if (e instanceof InputEvent) {\r\n            if (!e.data)\r\n                return;\r\n        }\r\n        // сами не можем вводить пробелы\r\n        if (e instanceof InputEvent) {\r\n            if (e.data === ' ') {\r\n                cardNumber.value = cardNumber.value.slice(0, -1);\r\n                return;\r\n            }\r\n        }\r\n        // меняем все символы в строке на '' кроме цифр и пробелов\r\n        cardNumber.value = cardNumber.value.replace(/[^0-9\\s]+/g, '');\r\n        if (cardNumber.value.replace(/\\s/g, '').length % 4 === 0 &&\r\n            cardNumber.value.length > 0) {\r\n            cardNumber.value += ' ';\r\n        }\r\n        // если в строке есть 16 цифр запрещаем ввод\r\n        if (cardNumber.value.replace(/\\s/g, '').length > 15) {\r\n            cardNumber.value = cardNumber.value.slice(0, -1);\r\n        }\r\n        let bankCardImg = document.querySelector('.bankcard-img');\r\n        if (Number(cardNumber.value[0]) === 4) {\r\n            bankCardImg.src = './assets/visa.png';\r\n        }\r\n        else if (Number(cardNumber.value[0]) === 5) {\r\n            bankCardImg.src = './assets/masterCard.png';\r\n        }\r\n        else if (Number(cardNumber.value[0]) === 6) {\r\n            bankCardImg.src = './assets/maestro.png';\r\n        }\r\n        else {\r\n            bankCardImg.src = './assets/bankCard.png';\r\n        }\r\n    }\r\n    validEmail(input) {\r\n        if (!Validator.isValidEmail(input.value)) {\r\n            input.classList.add('error');\r\n            document.querySelector('.error-email').classList.add('show');\r\n        }\r\n        else {\r\n            input.classList.remove('error');\r\n            document.querySelector('.error-email').classList.remove('show');\r\n        }\r\n    }\r\n    validPhone(input) {\r\n        if (!Validator.isValidPhone(input.value)) {\r\n            input.classList.add('error');\r\n            document.querySelector('.error-number').classList.add('show');\r\n        }\r\n        else {\r\n            input.classList.remove('error');\r\n            document.querySelector('.error-number').classList.remove('show');\r\n        }\r\n    }\r\n    validName(input) {\r\n        if (!Validator.isValidName(input.value)) {\r\n            input.classList.add('error');\r\n            document.querySelector('.error-name').classList.add('show');\r\n        }\r\n        else {\r\n            input.classList.remove('error');\r\n            document.querySelector('.error-name').classList.remove('show');\r\n        }\r\n    }\r\n    validAddress(input) {\r\n        if (!Validator.isValidAddress(input.value)) {\r\n            input.classList.add('error');\r\n            document.querySelector('.error-address').classList.add('show');\r\n        }\r\n        else {\r\n            input.classList.remove('error');\r\n            document.querySelector('.error-address').classList.remove('show');\r\n        }\r\n    }\r\n    validCardNumber(input) {\r\n        if (!Validator.isValidCardNumber(input.value)) {\r\n            input.classList.add('error');\r\n            document.querySelector('.error-card-number').classList.add('show');\r\n        }\r\n        else {\r\n            input.classList.remove('error');\r\n            document.querySelector('.error-card-number').classList.remove('show');\r\n        }\r\n    }\r\n    validThru(input) {\r\n        if (!Validator.isValidValidThru(input.value)) {\r\n            input.classList.add('error');\r\n            document.querySelector('.error-thru').classList.add('show');\r\n        }\r\n        else {\r\n            input.classList.remove('error');\r\n            document.querySelector('.error-thru').classList.remove('show');\r\n        }\r\n    }\r\n    validCvv(input) {\r\n        if (!Validator.isValidCvv(input.value)) {\r\n            input.classList.add('error');\r\n            document.querySelector('.error-cvv').classList.add('show');\r\n        }\r\n        else {\r\n            input.classList.remove('error');\r\n            document.querySelector('.error-cvv').classList.remove('show');\r\n        }\r\n    }\r\n    validThruHandler(e, validThru) {\r\n        if (e instanceof InputEvent) {\r\n            if (!e.data)\r\n                return;\r\n        }\r\n        if (e instanceof InputEvent) {\r\n            if (e.data === '/' || e.data === ' ') {\r\n                validThru.value = validThru.value.slice(0, -1);\r\n                return;\r\n            }\r\n        }\r\n        validThru.value = validThru.value.replace(/[^0-9\\/]+/g, '');\r\n        if (validThru.value.replace(/\\//g, '').length % 2 === 0 &&\r\n            validThru.value.length > 0) {\r\n            validThru.value += '/';\r\n        }\r\n        if (validThru.value.replace(/\\//g, '').length > 3) {\r\n            validThru.value = validThru.value.slice(0, -1);\r\n        }\r\n    }\r\n    cvvHandler(e, cvv) {\r\n        if (e instanceof InputEvent) {\r\n            if (!e.data)\r\n                return;\r\n        }\r\n        cvv.value = cvv.value.replace(/[^0-9]+/g, '');\r\n        if (cvv.value.length > 3) {\r\n            cvv.value = cvv.value.slice(0, -1);\r\n        }\r\n    }\r\n    buyFromProductDetails(data) {\r\n        const currentId = location.hash.split('/').slice(-1)[0];\r\n        window.location.hash = '#cart';\r\n        const isCart = localStorage.getItem('cart');\r\n        const itemsInCart = isCart ? JSON.parse(isCart) : {};\r\n        if (!itemsInCart.inCart ||\r\n            (itemsInCart.inCart &&\r\n                !itemsInCart.inCart\r\n                    .map((item) => item.id)\r\n                    .includes(Number(currentId)))) {\r\n            const previousProducts = itemsInCart.inCart\r\n                ? itemsInCart.inCart\r\n                : [];\r\n            if (data) {\r\n                const currentProduct = data.find((item) => item.id === Number(currentId));\r\n                if (currentProduct) {\r\n                    currentProduct.count = 1;\r\n                    previousProducts.push(currentProduct);\r\n                    const newData = JSON.stringify({ ['inCart']: previousProducts });\r\n                    localStorage.setItem('cart', newData);\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n","export const modalLayout = `\n<div class=\"modal-content\">\n    <form class=\"form\" action=\"\" novalidate>\n        <p class=\"form-title personal-title\">Personal Data</p>\n        <div class=\"form__group\">\n            <input type=\"text\" class=\"input input-name\" name=\"fullName\" placeholder=\"Name\">\n            <div class=\"error-name\">Please enter a valid name (NAME SURNAME) </div>\n        </div>\n        <div class=\"form__group\">\n            <input type=\"tel\" minlength=\"9\"\n            maxlength=\"14\" class=\"input input-number\" name=\"number\" placeholder=\"Phone number\">\n            <div class=\"error-number\">Please enter a valid phone number (phone number length minimum 9 and maximum 14). </div>\n        </div>\n        <div class=\"form__group\">\n            <input type=\"text\" class=\"input input-address\" name=\"address\" placeholder=\"Delivery address\">\n            <div class=\"error-address\">Please enter a valid address (address should contains at least three words no shorter than 5 characters.) </div>\n        </div>\n        <div class=\"form__group\">\n            <input type=\"email\" class=\"input input-email\" name=\"email\" placeholder=\"E-mail\">\n            <div class=\"error-email\">Please enter a valid email (name@test.com) </div>\n        </div>\n        <p class=\"form-title card-title\">Card data</p>\n        <div class=\"form__group card-number-wrapper\">\n            <input type=\"text\" class=\"input input-card-number\" name=\"card-number\" placeholder=\"Card number\">\n            <img src=\"./assets/bankCard.png\" class=\"bankcard-img\" width=\"80px\" height=\"50px\" alt=\"bankCard\">\n             </div>\n         <div class=\"error-card-number\">Please enter a valid payment card number. </div>\n        <div class=\"card-data-wrapper\">\n        <div>\n        <input type=\"text\" class=\"input input-valid-thru\" name=\"valid-thru\" placeholder=\"valid thru\">\n            <div class=\"error-thru\">MM/YY </div>\n            </div>\n            <div>\n            <input type=\"text\" class=\"input input-cvv\" name=\"cvv\" placeholder=\"CVV\">\n            <div class=\"error-cvv\">XXX</div>\n            </div>   \n        </div>\n        <button class=\"sumbit-btn\" type=\"submit\">\n            Confirm\n        </button>\n    </form>\n</div>\n`;\r\n","// ключ - название промокода, значение - скидка в процентах\r\nexport const promocodes = {\r\n    rss: 10,\r\n    epam: 15,\r\n    develop: 10,\r\n};\r\n","import { promocodes } from './promocodes';\r\nexport default class PromoCode {\r\n    constructor() {\r\n        this.couponInput = document.querySelector('.coupon');\r\n        this.appliedPromo = new Set(JSON.parse(localStorage.getItem('coupons')) || []);\r\n    }\r\n    listener() {\r\n        this.createList();\r\n        this.couponInput.addEventListener('input', () => {\r\n            for (let promo in promocodes) {\r\n                if (this.couponInput.value.toLowerCase() === promo) {\r\n                    this.createPromo(promo);\r\n                }\r\n                else {\r\n                    this.deletePromo(promo);\r\n                }\r\n            }\r\n        });\r\n    }\r\n    createPromo(promo) {\r\n        let wrapper = document.createElement('div'), promoElement = document.createElement('div'), applyPromoBtn = document.createElement('button');\r\n        wrapper.classList.add('wrapper');\r\n        promoElement.classList.add('find-promo');\r\n        applyPromoBtn.classList.add('apply-promo');\r\n        promoElement.textContent = `${promo} - ${promocodes[promo]}%`;\r\n        applyPromoBtn.textContent = `add`;\r\n        applyPromoBtn.addEventListener('click', () => {\r\n            this.appliedPromo.add(promo);\r\n            let array = JSON.parse(localStorage.getItem('coupons')) || [];\r\n            array.push(promo);\r\n            localStorage.setItem('coupons', JSON.stringify(array));\r\n            this.createList();\r\n        });\r\n        wrapper.append(promoElement, applyPromoBtn);\r\n        const findCoupon = document.querySelector('.find-coupon');\r\n        if (findCoupon) {\r\n            findCoupon.append(wrapper);\r\n        }\r\n    }\r\n    deletePromo(promo) {\r\n        let findCouponsWrapper = document.querySelector('.find-coupon');\r\n        let findCoupon = findCouponsWrapper.querySelector('.find-promo');\r\n        if (findCoupon && findCoupon.textContent.startsWith(promo)) {\r\n            findCoupon.closest('.wrapper').remove();\r\n        }\r\n    }\r\n    createList() {\r\n        let appliedCoupons = document.querySelector('.applied-coupons');\r\n        let promos = document.createElement('div');\r\n        promos.classList.add('promos');\r\n        let title = document.createElement('div');\r\n        appliedCoupons.innerHTML = '';\r\n        if (this.appliedPromo.size > 0) {\r\n            title.classList.add('applied-promo-title');\r\n            title.textContent = 'Applied promo';\r\n            appliedCoupons.append(title);\r\n        }\r\n        const array = Array.from(this.appliedPromo);\r\n        array.forEach((promo) => {\r\n            let wrapper = document.createElement('div');\r\n            let coupon = document.createElement('div');\r\n            let drop = document.createElement('button');\r\n            wrapper.classList.add('promo-drop__wrapper');\r\n            coupon.classList.add('promo');\r\n            drop.classList.add('drop');\r\n            coupon.textContent = `${promo} - ${promocodes[promo]}%`;\r\n            drop.textContent = 'drop';\r\n            drop.addEventListener('click', () => {\r\n                this.appliedPromo.delete(promo);\r\n                let array = JSON.parse(localStorage.getItem('coupons')) || [];\r\n                let newArray = array.filter((item) => item !== promo);\r\n                localStorage.setItem('coupons', JSON.stringify(newArray));\r\n                this.createList();\r\n            });\r\n            wrapper.append(coupon, drop);\r\n            promos.append(wrapper);\r\n        });\r\n        appliedCoupons.append(promos);\r\n        this.setNewPrice();\r\n    }\r\n    setNewPrice() {\r\n        const discountPrice = document.querySelector('.discount-price');\r\n        const buyTotalAmount = document.querySelector('.buy__total-amount');\r\n        if (this.appliedPromo.size) {\r\n            buyTotalAmount.classList.add('crossOut');\r\n            const arrayPromo = Array.from(this.appliedPromo);\r\n            const percentAmount = arrayPromo.reduce((total, promo) => {\r\n                return (total += promocodes[promo]);\r\n            }, 0);\r\n            discountPrice.textContent = `Total:   $ ${(+buyTotalAmount.textContent.slice(2) *\r\n                (1 - percentAmount / 100)).toFixed(2)}`;\r\n        }\r\n        else {\r\n            discountPrice.innerHTML = '';\r\n            buyTotalAmount.classList.remove('crossOut');\r\n        }\r\n    }\r\n}\r\n","import CartComponent from '../../components/CartComponent';\r\nimport { AbstractView } from '../AbstractView';\r\nimport { cartLayout } from './htmlCart';\r\nimport Modal from './ModalWindow';\r\nimport PromoCode from './PromoCode';\r\nclass Cart extends AbstractView {\r\n    constructor(params) {\r\n        super(params);\r\n        this.params = params;\r\n        this.setTitle('Basket');\r\n        this.cart = new CartComponent();\r\n    }\r\n    fillCartList() {\r\n        const currentCart = this.cart.getCart();\r\n        const orderEl = document.querySelector('.order');\r\n        if (currentCart && currentCart.length > 0) {\r\n            this.cart.pagination();\r\n            const limit = document.querySelector('#limit');\r\n            const limitValue = limit ? Number(limit.value) : 4;\r\n            const currentPage = document.querySelector('.pagination .active');\r\n            const currentPageValue = currentPage\r\n                ? Number(currentPage.textContent)\r\n                : 1;\r\n            const start = currentPageValue > 1 ? limitValue * currentPageValue - limitValue : 0;\r\n            let lastIndex = currentPageValue * limitValue - limitValue;\r\n            const end = start + limitValue;\r\n            const dataToShow = currentCart.slice(start, end);\r\n            this.cart.setCurrentAmountHeader();\r\n            const cartWrapper = document.querySelector('.basket-list');\r\n            orderEl ? orderEl.classList.remove('hidden') : null;\r\n            const content = dataToShow.map((item, i) => `<li class=\"basket-list-item\">\n          <div  class=\"basket-item-container\">\n          <div class=\"basket-item-number\">\n          <p >${currentPageValue > 1 ? ++lastIndex : i + 1}.</p></div>\n           <div id=${item.id}  class = \"basket-item-photo\" style = background-image:url('${item.thumbnail}') ></div>\n            <div class=\"basket-item-description\">\n              <p>${item.title} (${item.category[0].toUpperCase() +\r\n                item.category.slice(1, item.category.length)})</p>\n              <p>${item.description}</p>\n              <p>Rating: ${item.rating}</p>\n            </div>\n            <div class=\"basket-item-price\" >\n              <p>$ ${item.price}.00</p>\n            </div>\n            <div id =${item.id} class=\"basket-item-count\">\n              <button class=\"basket-item-add\">+</button>\n            <div class=\"item-count-info\">\n              <p class=\"basket-item-stock\">Stock: ${item.stock}</p>\n              <p>${item.count}</p>\n            </div>  \n              <button class=\"basket-item-remove\">-</button>\n            </div>\n            <div class=\"basket-item-total\">\n              <p>$${item.count ? item.count * item.price : 0}.00</p>\n            </div>\n          </div>\n        </li>`);\r\n            cartWrapper && content.length > 0\r\n                ? (cartWrapper.innerHTML = content.reduce((a, b) => a + b))\r\n                : null;\r\n        }\r\n        else {\r\n            const cartSection = document.querySelector('.basket-products');\r\n            const textForEmpty = document.createElement('div');\r\n            textForEmpty.classList.add('basket-empty');\r\n            textForEmpty.textContent = 'Cart is empty';\r\n            if (cartSection) {\r\n                cartSection.innerHTML = '';\r\n                cartSection.append(textForEmpty);\r\n            }\r\n            orderEl ? orderEl.classList.add('hidden') : null;\r\n        }\r\n        this.cart.listenCount();\r\n        this.cart.listenCardDetails();\r\n    }\r\n    render(root, data) {\r\n        root.innerHTML = cartLayout;\r\n        this.fillCartList();\r\n        this.afterRootRender(data);\r\n    }\r\n    afterRootRender(data) {\r\n        const modalWindow = new Modal();\r\n        data ? modalWindow.listener(data.products) : modalWindow.listener();\r\n        const promo = new PromoCode();\r\n        promo.listener();\r\n    }\r\n}\r\nexport { Cart };\r\n","export const cartLayout = `\n<section class=\"basket-page\">\n    <div class=\"container\">\n        <h2 class=\"basket__title\">Cart</h2>\n        <div class=\"pagination-wrapper\">\n        <div class=\"pagination-limit\"></div>\n        <div class=\"pagination\"></div>\n        </div>\n        <div class=\"basket-products\">\n        <div class=\"basket-products__name\"><h4>Product</h4></div>\n        <div class=\"basket-products__price\"><h4>Price</h4></div>\n        <div class=\"basket-products__amount\"><h4>Amount</h4></div>\n        <div class=\"basket-products__total\"><h4>Total</h4></div>\n        </div>\n        <div ><ul class=\"basket-list\"></ul></div>\n        <div class=\"order\">\n            <div class=\"coupon__wrapper\">\n               <input type=\"text\" class=\"coupon\" placeholder=\"promo code (rss, epam)\">\n               <div class=\"find-coupon\"></div>\n               <div class=\"applied-coupons\"></div>\n            </div>\n            <div class=\"buy__wrapper\">\n              <div class=\"buy__total\"><div><p class=\"basket-amount\"></p>\n            </div>\n                  <p>Total:&nbsp;&nbsp;</p>\n                    <p class=\"buy__total-amount\"></p>\n                    <div class=\"discount-price\"></div>\n                </div>\n                <button class=\"buy__order\">BUY NOW</button>\n            </div>\n        <div>\n    </div>\n<section>`;\r\n","class Storage {\r\n    constructor(name) {\r\n        this.store = name;\r\n        this.obj = this.getAll();\r\n    }\r\n    set(key, value) {\r\n        const data = this.obj;\r\n        data[key] = value;\r\n        const newData = JSON.stringify(data);\r\n        localStorage.setItem(this.store, newData);\r\n    }\r\n    get(key) {\r\n        return this.obj[key];\r\n    }\r\n    drop(key) {\r\n        this.obj[key] && this.obj[key].length > 0\r\n            ? (this.obj[key].length = 0)\r\n            : this.obj[key];\r\n        const data = this.obj;\r\n        const newData = JSON.stringify(data);\r\n        localStorage.setItem(this.store, newData);\r\n    }\r\n    getAll() {\r\n        const data = localStorage.getItem(this.store);\r\n        return data ? JSON.parse(data) : {};\r\n    }\r\n    dropAll() {\r\n        localStorage.clear();\r\n    }\r\n}\r\nexport default Storage;\r\n","import { Cart } from '../pages/Basket/Cart';\r\nimport RouterHelper from '../utils/RouterHelper';\r\nimport Storage from '../utils/Storage';\r\nexport default class CartComponent {\r\n    constructor() {\r\n        this.storage = new Storage('cart');\r\n        this.cartData = this.storage.get('inCart') || [];\r\n    }\r\n    listenCart(allData) {\r\n        this.setCurrentAmountHeader();\r\n        const allProducts = document.querySelector('.products-items');\r\n        const productDetail = document.querySelector('.product-wrapper');\r\n        const currentContent = allProducts ? allProducts : productDetail;\r\n        if (currentContent) {\r\n            currentContent.addEventListener('click', (e) => {\r\n                this.cartData = this.storage.get('inCart') || [];\r\n                const currentId = e.target instanceof HTMLElement ? Number(e.target.id) : '';\r\n                const checkedProduct = allData.find((item) => item.id === currentId);\r\n                if (checkedProduct &&\r\n                    e.target instanceof HTMLElement &&\r\n                    e.target.className === 'card__buttons-add') {\r\n                    checkedProduct.count = 1;\r\n                    this.cartData.push(checkedProduct);\r\n                    this.storage.set('inCart', this.cartData);\r\n                    this.toggleButton(e.target, e.target.id, 'Remove from cart');\r\n                }\r\n                else if (e.target instanceof HTMLButtonElement &&\r\n                    e.target.className === 'card__buttons-remove' &&\r\n                    checkedProduct) {\r\n                    checkedProduct.count = 0;\r\n                    const id = e.target.id;\r\n                    const newData = this.cartData.filter((item) => String(item.id) !== id);\r\n                    this.storage.set('inCart', newData);\r\n                    this.toggleButton(e.target, e.target.id, 'Add to cart');\r\n                }\r\n                this.setCurrentAmountHeader();\r\n            });\r\n        }\r\n    }\r\n    listenCount() {\r\n        const cartList = document.querySelector('.basket-list');\r\n        if (cartList) {\r\n            cartList.addEventListener('click', (e) => {\r\n                if (e.target instanceof HTMLElement &&\r\n                    e.target.classList.contains('basket-item-add')) {\r\n                    const closestEl = e.target.closest('div');\r\n                    if (closestEl) {\r\n                        const currentId = Number(closestEl.id);\r\n                        this.cartData.forEach((item) => item.id === currentId &&\r\n                            item.count &&\r\n                            item.stock >= item.count + 1\r\n                            ? (item.count += 1)\r\n                            : item);\r\n                    }\r\n                    this.storage.set('inCart', this.cartData);\r\n                }\r\n                else if (e.target instanceof HTMLElement &&\r\n                    e.target.classList.contains('basket-item-remove')) {\r\n                    const closestEl = e.target.closest('div');\r\n                    if (closestEl) {\r\n                        const currentId = Number(closestEl.id);\r\n                        this.cartData.forEach((item) => {\r\n                            if (item.id === currentId && item.count && item.count > 1) {\r\n                                item.count -= 1;\r\n                                this.storage.set('inCart', this.cartData);\r\n                            }\r\n                            else if (item.id === currentId && item.count === 1) {\r\n                                const newData = this.cartData.filter((prod) => prod.id !== item.id);\r\n                                this.storage.set('inCart', newData);\r\n                            }\r\n                        });\r\n                    }\r\n                }\r\n                const view = new Cart('#cart');\r\n                const root = document.querySelector('#root');\r\n                root ? view.render(root) : null;\r\n            });\r\n        }\r\n        const totalAmount = document.querySelector('.buy__total-amount');\r\n        if (totalAmount) {\r\n            totalAmount.textContent = `$ ${this.getTotalAmount()}.00`;\r\n        }\r\n        this.setCurrentAmountHeader();\r\n    }\r\n    setCurrentAmountHeader() {\r\n        const totalAmount = this.getTotalAmount() || 0;\r\n        const amountEl = document.querySelector('#totalAmount');\r\n        if (amountEl) {\r\n            amountEl.textContent = totalAmount\r\n                ? `Total: $ ${totalAmount}`\r\n                : 'Total: $ 0';\r\n        }\r\n        this.setProductsInCart();\r\n    }\r\n    setProductsInCart() {\r\n        const cartHeader = document.querySelector('.basket-count');\r\n        const basketAmount = document.querySelector('.basket-amount');\r\n        const productInCart = this.cartData && this.cartData.length > 0\r\n            ? this.cartData\r\n                .map((item) => item.count)\r\n                .reduce((a, b) => {\r\n                if (a && b) {\r\n                    return a + b;\r\n                }\r\n            })\r\n            : 0;\r\n        if (productInCart && productInCart > 0 && cartHeader) {\r\n            cartHeader.style.display = 'block';\r\n            cartHeader.textContent = `${productInCart}`;\r\n            basketAmount\r\n                ? (basketAmount.textContent = `Products: ${productInCart}`)\r\n                : null;\r\n        }\r\n        else {\r\n            cartHeader ? (cartHeader.style.display = 'none') : null;\r\n        }\r\n    }\r\n    listenCardDetails() {\r\n        const productsList = document.querySelector('.basket-list');\r\n        if (productsList) {\r\n            productsList.addEventListener('click', (e) => {\r\n                if (e.target instanceof HTMLElement &&\r\n                    e.target.classList.contains('basket-item-photo')) {\r\n                    const id = e.target.id;\r\n                    window.location.hash = `#product-details/${id}`;\r\n                }\r\n            });\r\n        }\r\n    }\r\n    getTotalAmount() {\r\n        this.cartData = this.storage.get('inCart') || [];\r\n        const totalAmount = this.cartData && this.cartData.length > 0\r\n            ? this.cartData\r\n                .map((item) => {\r\n                if (item.count) {\r\n                    return item.price * item.count;\r\n                }\r\n            })\r\n                .reduce((prev, curr) => {\r\n                if (prev && curr) {\r\n                    return prev + curr;\r\n                }\r\n            })\r\n            : 0;\r\n        return totalAmount;\r\n    }\r\n    getCart() {\r\n        return this.storage.get('inCart') ? this.storage.get('inCart') : [];\r\n    }\r\n    toggleButton(target, id, text) {\r\n        const addedItem = document.querySelector(`.card__item.id-${id}`);\r\n        target.textContent = `${text}`;\r\n        target.classList.toggle('card__buttons-remove');\r\n        target.classList.toggle('card__buttons-add');\r\n        addedItem ? addedItem.classList.toggle('in-cart') : null;\r\n    }\r\n    pagination() {\r\n        const currentLimit = this.storage.get('limit') && this.storage.get('limit')[0]\r\n            ? this.storage.get('limit')[0]\r\n            : 4;\r\n        let currentPage = this.storage.get('page') && this.storage.get('page')[0]\r\n            ? this.storage.get('page')[0]\r\n            : 1;\r\n        const limitElement = document.querySelector('.pagination-limit');\r\n        if (limitElement) {\r\n            limitElement.innerHTML = `<label for=\"limit\">Limit: </label>\n        <input id=\"limit\" type=\"number\" value=\"4\" min=\"1\"/>`;\r\n        }\r\n        const inputLimit = document.querySelector('#limit');\r\n        const paginator = document.querySelector('.pagination');\r\n        if (inputLimit && paginator) {\r\n            inputLimit.value = `${currentLimit}`;\r\n            const countItems = this.getCart().length;\r\n            const itemsOnPage = inputLimit.value;\r\n            const countPages = Math.ceil(countItems / Number(itemsOnPage));\r\n            if (countPages < currentPage) {\r\n                currentPage = String(countPages);\r\n                this.storage.set('page', [currentPage]);\r\n            }\r\n            let page = '';\r\n            for (let i = 0; i < countPages; i++) {\r\n                page += `<div id=\"page${i + 1}\">${i + 1}</div>`;\r\n            }\r\n            paginator.innerHTML = page;\r\n            const prev = currentPage > 1\r\n                ? `<div class=\"prev\"><</div>`\r\n                : `<div class=\"prev0\"><</div>`;\r\n            const next = currentPage < countPages\r\n                ? `<div class=\"next\">></div> `\r\n                : `<div class=\"next-last\">></div>`;\r\n            paginator.insertAdjacentHTML('afterbegin', prev);\r\n            paginator.insertAdjacentHTML('beforeend', next);\r\n            const currentPageEl = paginator.querySelector(`#page${currentPage}`);\r\n            if (currentPageEl) {\r\n                currentPageEl.classList.add('active');\r\n            }\r\n            paginator.addEventListener('click', (e) => {\r\n                if (e.target instanceof HTMLElement &&\r\n                    !e.target.classList.contains('prev0') &&\r\n                    !e.target.classList.contains('next-last')) {\r\n                    if (e.target.id) {\r\n                        paginator\r\n                            .querySelectorAll('div')\r\n                            .forEach((item) => item.classList.remove('active'));\r\n                        e.target.classList.add('active');\r\n                        const checkedPage = e.target.textContent || '';\r\n                        this.checkPage(checkedPage);\r\n                    }\r\n                    else if (e.target.classList.contains('prev')) {\r\n                        const page = Number(currentPage) - 1;\r\n                        this.checkPage(String(page));\r\n                    }\r\n                    else if (e.target.classList.contains('next')) {\r\n                        const page = Number(currentPage) + 1;\r\n                        this.checkPage(String(page));\r\n                    }\r\n                }\r\n            });\r\n            inputLimit.addEventListener('input', (e) => {\r\n                if (e.target instanceof HTMLInputElement) {\r\n                    this.storage.set('limit', [e.target.value]);\r\n                    const currentFilters = RouterHelper.setFilter(location.hash);\r\n                    const prevHash = location.hash.includes('page')\r\n                        ? `page=${currentFilters.page[0]}&`\r\n                        : '';\r\n                    window.location.hash = `#cart/?${prevHash}limit=${e.target.value}`;\r\n                }\r\n            });\r\n        }\r\n    }\r\n    checkPage(page) {\r\n        const currentFilters = RouterHelper.setFilter(location.hash);\r\n        this.storage.set('page', [page]);\r\n        const prevHash = location.hash.includes('limit')\r\n            ? `limit=${currentFilters.limit[0]}&`\r\n            : '';\r\n        window.location.hash = `#cart/?${prevHash}page=${page}`;\r\n    }\r\n    clearStorage() {\r\n        ['limit', 'page'].forEach((item) => this.storage.drop(item));\r\n    }\r\n}\r\n","export default class PhotoListener {\r\n    listenPhoto() {\r\n        const imgBox = document.querySelector('.img-choose');\r\n        const mainPhoto = document.querySelector('.img-main');\r\n        const imgList = document.querySelectorAll('.img-choose img');\r\n        if (imgBox) {\r\n            imgBox.addEventListener('click', (e) => {\r\n                if (e.target instanceof HTMLImageElement &&\r\n                    e.target.tagName === 'IMG' &&\r\n                    mainPhoto) {\r\n                    const currentSrc = e.target.src;\r\n                    mainPhoto.src = currentSrc;\r\n                    imgList.forEach((item) => item.classList.remove('active'));\r\n                    e.target.classList.add('active');\r\n                }\r\n            });\r\n        }\r\n    }\r\n}\r\n","import { AbstractView } from '../AbstractView';\r\nimport RouterHelper from '../../utils/RouterHelper';\r\nimport ProductDetailsCard from '../../components/ProductDetailsCard';\r\nimport CartComponent from '../../components/CartComponent';\r\nimport Modal from '../Basket/ModalWindow';\r\nimport PhotoListener from '../../components/Listeners/PhotoListener';\r\nclass ProductDetails extends AbstractView {\r\n    constructor(params) {\r\n        super(params);\r\n        this.params = params;\r\n        this.setTitle('Product Details');\r\n        this.productsView = new ProductDetailsCard();\r\n        this.cart = new CartComponent();\r\n        this.modalWindow = new Modal();\r\n        this.photo = new PhotoListener();\r\n    }\r\n    showIncorrect() {\r\n        const div = document.createElement('div');\r\n        div.classList.add('not-found');\r\n        div.textContent = `Product number\n  ${this.params.split('/').slice(-1).join('')}\n    not found`;\r\n        return div;\r\n    }\r\n    getItem(data) {\r\n        const id = RouterHelper.checkId(this.params);\r\n        if (id) {\r\n            const item = data.products.filter((x) => x.id === id);\r\n            return item.length > 0 ? this.productsView.draw(item) : null;\r\n        }\r\n        else\r\n            return null;\r\n    }\r\n    afterRootRender(data) {\r\n        const productItem = this.getItem(data);\r\n        const productItemContainer = document.querySelector('.product-details');\r\n        if (productItemContainer) {\r\n            if (productItem) {\r\n                productItemContainer.append(productItem);\r\n                this.cart.listenCart(data.products);\r\n                this.modalWindow.listener(data.products);\r\n                this.photo.listenPhoto();\r\n            }\r\n            else\r\n                productItemContainer.append(this.showIncorrect());\r\n        }\r\n    }\r\n    render(root, data) {\r\n        root.innerHTML = '<div class=\"product-details container\"></div>';\r\n        this.afterRootRender(data);\r\n    }\r\n}\r\nexport { ProductDetails };\r\n","class ProductDetailsCard {\r\n    draw(data) {\r\n        const cartInStorage = localStorage.getItem('cart');\r\n        let shopInfo = {};\r\n        if (cartInStorage) {\r\n            shopInfo = JSON.parse(cartInStorage);\r\n        }\r\n        const inCart = shopInfo && shopInfo.inCart ? shopInfo.inCart : [];\r\n        const cartId = inCart.map((item) => item.id);\r\n        const fragment = document.createDocumentFragment();\r\n        const cardItemTemp = document.querySelector('#productDetails');\r\n        if (data.length === 1 && cardItemTemp instanceof HTMLTemplateElement) {\r\n            const product = data[0];\r\n            const cardClone = cardItemTemp.content.cloneNode(true);\r\n            const crumbEl = cardClone.querySelector('.crumb-category');\r\n            if (crumbEl) {\r\n                crumbEl.textContent = product.category;\r\n                crumbEl.href = `#?/category=${product.category.toLowerCase()}`;\r\n            }\r\n            const brandCrumb = cardClone.querySelector('.crumb-brand');\r\n            if (brandCrumb) {\r\n                brandCrumb.textContent = product.brand;\r\n                brandCrumb.href = `#?/brand=${product.brand.toLowerCase()}`;\r\n            }\r\n            const titleCrumb = cardClone.querySelector('.crumb-title');\r\n            if (titleCrumb) {\r\n                titleCrumb.textContent = product.title;\r\n            }\r\n            const titleEl = cardClone.querySelector('.product-item');\r\n            if (titleEl) {\r\n                titleEl.textContent = product.title;\r\n            }\r\n            const imgEl = cardClone.querySelector('.img-one');\r\n            if (imgEl) {\r\n                imgEl.src = product.thumbnail;\r\n            }\r\n            const imgElTwo = cardClone.querySelector('.img-two');\r\n            if (imgElTwo) {\r\n                product.id === 1\r\n                    ? (imgElTwo.src = product.images[3])\r\n                    : (imgElTwo.src = product.images[1]);\r\n            }\r\n            const imgElThree = cardClone.querySelector('.img-three');\r\n            if (imgElThree) {\r\n                imgElThree.src = product.images[2];\r\n            }\r\n            const imgMain = cardClone.querySelector('.img-main');\r\n            if (imgMain) {\r\n                imgMain.src = product.thumbnail;\r\n            }\r\n            const descriptionEl = cardClone.querySelector('.product-description-text');\r\n            if (descriptionEl) {\r\n                descriptionEl.textContent = product.description;\r\n            }\r\n            const ratingEl = cardClone.querySelector('.product-rating-value');\r\n            if (ratingEl) {\r\n                ratingEl.textContent = `${product.rating}`;\r\n            }\r\n            const stockEl = cardClone.querySelector('.product-stock-value');\r\n            if (stockEl) {\r\n                stockEl.textContent = `${product.stock}`;\r\n            }\r\n            const brandEl = cardClone.querySelector('.product-brand-value');\r\n            if (brandEl) {\r\n                brandEl.textContent = product.brand;\r\n            }\r\n            const categoryEl = cardClone.querySelector('.product-category-value');\r\n            if (categoryEl) {\r\n                categoryEl.textContent = product.category;\r\n            }\r\n            const priceEl = cardClone.querySelector('.product-price');\r\n            if (priceEl) {\r\n                priceEl.textContent = `Price: $${product.price}.00`;\r\n            }\r\n            const buttonAdd = cardClone.querySelector('.card__buttons-add');\r\n            if (buttonAdd) {\r\n                buttonAdd.id = `${product.id}`;\r\n            }\r\n            if (cartId.includes(product.id) && buttonAdd) {\r\n                buttonAdd.classList.remove('card__buttons-add');\r\n                buttonAdd.classList.add('card__buttons-remove');\r\n                buttonAdd.textContent = 'Remove from cart';\r\n            }\r\n            fragment.append(cardClone);\r\n            return fragment;\r\n        }\r\n        else\r\n            return null;\r\n    }\r\n}\r\nexport default ProductDetailsCard;\r\n","import { AbstractView } from '../AbstractView';\r\nclass Error extends AbstractView {\r\n    constructor(params) {\r\n        super(params);\r\n    }\r\n    afterRootRender() { }\r\n    render(root) {\r\n        const div = document.createElement('div');\r\n        div.classList.add('error-page');\r\n        const errorWrapper = document.createElement('div');\r\n        errorWrapper.textContent = `404`;\r\n        div.append(errorWrapper);\r\n        root.append(div);\r\n    }\r\n}\r\nexport default Error;\r\n","import RouterHelper from '../../utils/RouterHelper';\r\nexport default class Sort {\r\n    constructor() {\r\n        this.currentFilters = RouterHelper.setFilter(location.hash);\r\n    }\r\n    listen(count) {\r\n        this.listenSort();\r\n        this.listenFound(count);\r\n        this.listenView();\r\n    }\r\n    listenSort() {\r\n        const inputSort = document.getElementById('input');\r\n        const currentSort = this.currentFilters['sort']\r\n            ? this.currentFilters['sort'][0]\r\n            : '';\r\n        if (currentSort) {\r\n            const currentSortEl = document.querySelector(`#${currentSort}`);\r\n            currentSortEl ? currentSortEl.classList.add('selected') : null;\r\n            if (inputSort instanceof HTMLInputElement) {\r\n                const selectedSort = document.querySelector(`#${currentSort}.selected`);\r\n                if (selectedSort) {\r\n                    const sortValue = selectedSort.textContent;\r\n                    sortValue ? (inputSort.value = sortValue) : null;\r\n                }\r\n            }\r\n        }\r\n        const selectContainer = document.querySelector('.sort-bar');\r\n        const select = document.querySelector('.select');\r\n        const options = document.querySelectorAll('.sort-bar .option');\r\n        const root = document.querySelector('#root');\r\n        let checkedSort = '';\r\n        if (select && selectContainer && root) {\r\n            select.addEventListener('click', () => {\r\n                selectContainer.classList.add('active');\r\n            });\r\n            selectContainer.addEventListener('click', (e) => {\r\n                if (e.target instanceof HTMLElement) {\r\n                    const closestTarget = e.target.closest('div');\r\n                    if (e.target.classList.contains('option') ||\r\n                        (closestTarget && closestTarget.classList.contains('option'))) {\r\n                        const value = e.target.closest('div');\r\n                        options.forEach((option) => {\r\n                            option.classList.remove('selected');\r\n                            if (value && inputSort instanceof HTMLInputElement) {\r\n                                value.classList.add('selected');\r\n                                const sortValue = value.children[0].textContent;\r\n                                sortValue ? (inputSort.value = sortValue) : null;\r\n                            }\r\n                            selectContainer.classList.remove('active');\r\n                        });\r\n                        value ? (checkedSort = value.id) : null;\r\n                        this.changeHash('sort', checkedSort);\r\n                    }\r\n                }\r\n            });\r\n            root.addEventListener('click', (e) => {\r\n                const sortBar = document.querySelector('.sort-bar.active');\r\n                if (e.target instanceof HTMLElement) {\r\n                    const targetClosest = e.target.closest('div');\r\n                    if (targetClosest &&\r\n                        !targetClosest.classList.contains('select') &&\r\n                        sortBar) {\r\n                        selectContainer.classList.remove('active');\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    }\r\n    changeHash(property, value) {\r\n        const currentHash = location.hash;\r\n        if (!currentHash || currentHash.slice(3, 7) === `${property}`) {\r\n            value.length > 0\r\n                ? (window.location.hash = `#?/${property}=${value}`)\r\n                : (window.location.hash = '');\r\n        }\r\n        else {\r\n            const hash = value.length > 0 ? `&${property}=${value}` : '';\r\n            window.location.hash = `${currentHash\r\n                .split('&')\r\n                .filter((item) => item.slice(0, 4) !== `${property}`)\r\n                .join('&')}${hash}`;\r\n        }\r\n    }\r\n    listenFound(count) {\r\n        const statElement = document.querySelector('.stat-count');\r\n        statElement ? (statElement.textContent = `${count}`) : null;\r\n    }\r\n    listenView() {\r\n        const viewMode = document.querySelector('.view-mode');\r\n        const productContainer = document.querySelector('.products-items');\r\n        const currentView = this.currentFilters['view']\r\n            ? this.currentFilters['view'][0]\r\n            : '';\r\n        if (currentView) {\r\n            const viewCurrent = document.querySelector('.view-mode .active');\r\n            viewCurrent ? viewCurrent.classList.remove('active') : null;\r\n            const currentViewEl = document.querySelector(`.${currentView}`);\r\n            currentViewEl ? currentViewEl.classList.add('active') : null;\r\n            if (productContainer) {\r\n                currentView === 'two'\r\n                    ? productContainer.classList.add('big')\r\n                    : productContainer.classList.remove('big');\r\n            }\r\n        }\r\n        viewMode\r\n            ? viewMode.addEventListener('click', (e) => {\r\n                if (e.target instanceof HTMLElement) {\r\n                    if (e.target.classList.contains('active')) {\r\n                        this.changeHash('view', e.target.classList[0]);\r\n                    }\r\n                    else {\r\n                        const viewCurrent = document.querySelector('.view-mode .active');\r\n                        viewCurrent ? viewCurrent.classList.remove('active') : null;\r\n                        e.target.classList.add('active');\r\n                        if (productContainer) {\r\n                            e.target.classList.contains('two')\r\n                                ? productContainer.classList.add('big')\r\n                                : productContainer.classList.remove('big');\r\n                        }\r\n                        this.changeHash('view', e.target.classList[0]);\r\n                    }\r\n                }\r\n            })\r\n            : null;\r\n    }\r\n}\r\n","export default class PriceFilterListener {\r\n    changeHash(min, max) {\r\n        const currentHash = location.hash;\r\n        if (!currentHash || currentHash.slice(3, 8) === 'price') {\r\n            window.location.hash = `#?/price=${min.toString()}+${max.toString()}`;\r\n        }\r\n        else {\r\n            const hash = `&price=${min.toString()}+${max.toString()}`;\r\n            window.location.hash = `${currentHash\r\n                .split('&')\r\n                .filter((item) => item.slice(0, 5) !== 'price')\r\n                .join('&')}${hash}`;\r\n        }\r\n        this.validateRange(min, max);\r\n    }\r\n    validateRange(minPrice, maxPrice) {\r\n        const minPriceInput = document.querySelector('.min-price');\r\n        const maxPriceInput = document.querySelector('.max-price');\r\n        const minValue = document.getElementById('min-value-price');\r\n        const maxValue = document.getElementById('max-value-price');\r\n        if (minPriceInput && maxPriceInput && minValue && maxValue) {\r\n            if (minPrice === Infinity || minPrice === -Infinity) {\r\n                minValue.innerHTML = '—';\r\n                maxValue.innerHTML = '—';\r\n            }\r\n            else {\r\n                minValue.innerHTML = '$' + minPrice;\r\n                maxValue.innerHTML = '$' + maxPrice;\r\n            }\r\n            minPriceInput.value = `${minPrice}`;\r\n            maxPriceInput.value = `${maxPrice}`;\r\n        }\r\n    }\r\n    listenPrice(minPrice, maxPrice) {\r\n        this.validateRange(minPrice, maxPrice);\r\n        const inputElements = document.querySelectorAll('#price input[type=\"range\"]');\r\n        inputElements.forEach((input) => {\r\n            input.addEventListener('change', (e) => {\r\n                const minPrice = parseInt(inputElements[0].value) < parseInt(inputElements[1].value)\r\n                    ? parseInt(inputElements[0].value)\r\n                    : parseInt(inputElements[1].value);\r\n                const maxPrice = parseInt(inputElements[0].value) > parseInt(inputElements[1].value)\r\n                    ? parseInt(inputElements[0].value)\r\n                    : parseInt(inputElements[1].value);\r\n                this.changeHash(minPrice, maxPrice);\r\n            });\r\n            input.addEventListener('input', (e) => {\r\n                const minPrice = parseInt(inputElements[0].value) < parseInt(inputElements[1].value)\r\n                    ? parseInt(inputElements[0].value)\r\n                    : parseInt(inputElements[1].value);\r\n                const maxPrice = parseInt(inputElements[0].value) > parseInt(inputElements[1].value)\r\n                    ? parseInt(inputElements[0].value)\r\n                    : parseInt(inputElements[1].value);\r\n                this.changeHash(minPrice, maxPrice);\r\n            });\r\n        });\r\n    }\r\n}\r\n","import RouterHelper from '../../utils/RouterHelper';\r\nexport default class Search {\r\n    listenSearch() {\r\n        const currentFilters = RouterHelper.setFilter(location.hash);\r\n        const inputSearch = document.querySelector('.search__input');\r\n        if (currentFilters.search && inputSearch) {\r\n            inputSearch.value = currentFilters.search[0];\r\n        }\r\n        if (inputSearch) {\r\n            inputSearch.addEventListener('input', (e) => {\r\n                e.preventDefault();\r\n                if (e.target instanceof HTMLInputElement) {\r\n                    this.changeHash(e.target.value.toLowerCase());\r\n                }\r\n            });\r\n        }\r\n    }\r\n    changeHash(text) {\r\n        const currentHash = location.hash;\r\n        if (!currentHash || currentHash.slice(3, 9) === 'search') {\r\n            text.length > 0\r\n                ? (window.location.hash = `#?/search=${text}`)\r\n                : (window.location.hash = '');\r\n        }\r\n        else {\r\n            const hash = text.length > 0 ? `&search=${text}` : '';\r\n            window.location.hash = `${currentHash\r\n                .split('&')\r\n                .filter((item) => item.slice(0, 6) !== 'search')\r\n                .join('&')}${hash}`;\r\n        }\r\n    }\r\n}\r\n","export default class StockFilterListener {\r\n    changeHash(min, max) {\r\n        const currentHash = location.hash;\r\n        if (!currentHash || currentHash.slice(3, 8) === 'stock') {\r\n            window.location.hash = `#?/stock=${min.toString()}+${max.toString()}`;\r\n        }\r\n        else {\r\n            const hash = `&stock=${min.toString()}+${max.toString()}`;\r\n            window.location.hash = `${currentHash\r\n                .split('&')\r\n                .filter((item) => item.slice(0, 5) !== 'stock')\r\n                .join('&')}${hash}`;\r\n        }\r\n        this.validateRange(min, max);\r\n    }\r\n    validateRange(minStock, maxStock) {\r\n        const minStockInput = document.querySelector('.min-stock');\r\n        const maxStockInput = document.querySelector('.max-stock');\r\n        const minValue = document.getElementById('min-value-stock');\r\n        const maxValue = document.getElementById('max-value-stock');\r\n        if (minValue && maxValue && minStockInput && maxStockInput) {\r\n            if (minStock === Infinity || minStock === -Infinity) {\r\n                minValue.innerHTML = '—';\r\n                maxValue.innerHTML = '—';\r\n            }\r\n            else {\r\n                minValue.innerHTML = `${minStock}`;\r\n                maxValue.innerHTML = `${maxStock}`;\r\n            }\r\n            minStockInput.value = `${minStock}`;\r\n            maxStockInput.value = `${maxStock}`;\r\n        }\r\n    }\r\n    listenStock(minStock, maxStock) {\r\n        this.validateRange(minStock, maxStock);\r\n        const inputElements = document.querySelectorAll('#stock input[type=\"range\"]');\r\n        inputElements.forEach((input) => {\r\n            input.addEventListener('change', (e) => {\r\n                const minStock = parseInt(inputElements[0].value) < parseInt(inputElements[1].value)\r\n                    ? parseInt(inputElements[0].value)\r\n                    : parseInt(inputElements[1].value);\r\n                const maxStock = parseInt(inputElements[0].value) > parseInt(inputElements[1].value)\r\n                    ? parseInt(inputElements[0].value)\r\n                    : parseInt(inputElements[1].value);\r\n                this.changeHash(minStock, maxStock);\r\n            });\r\n            input.addEventListener('input', (e) => {\r\n                const minStock = parseInt(inputElements[0].value) < parseInt(inputElements[1].value)\r\n                    ? parseInt(inputElements[0].value)\r\n                    : parseInt(inputElements[1].value);\r\n                const maxStock = parseInt(inputElements[0].value) > parseInt(inputElements[1].value)\r\n                    ? parseInt(inputElements[0].value)\r\n                    : parseInt(inputElements[1].value);\r\n                this.changeHash(minStock, maxStock);\r\n            });\r\n        });\r\n    }\r\n}\r\n","export default class UrlCopyListener {\r\n    listen() {\r\n        const copyBtn = document.querySelector('.copy');\r\n        if (copyBtn) {\r\n            copyBtn.addEventListener('click', () => {\r\n                let tempInput = document.createElement('input');\r\n                copyBtn.textContent = 'Copied!';\r\n                setTimeout(() => {\r\n                    copyBtn.textContent = 'Copy link';\r\n                }, 600);\r\n                tempInput.value = window.location.href;\r\n                if (copyBtn.parentNode) {\r\n                    copyBtn.parentNode.appendChild(tempInput);\r\n                    tempInput.select();\r\n                    document.execCommand('copy');\r\n                    if (tempInput.parentNode) {\r\n                        tempInput.parentNode.removeChild(tempInput);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    }\r\n}\r\n","export default class Sort {\r\n    static directSort(data, field) {\r\n        return data.sort((a, b) => Number(a[field]) - Number(b[field]));\r\n    }\r\n    static reverseSort(data, field) {\r\n        return data.sort((a, b) => Number(b[field]) - Number(a[field]));\r\n    }\r\n}\r\n","import ProductCards from '../../components/ProductCards';\r\nimport { AbstractView } from '../AbstractView';\r\nimport RouterHelper from '../../utils/RouterHelper';\r\nimport { homeRoot } from './htmlData';\r\nimport AllListener from '../../components/Listeners/AllListener';\r\nimport CartComponent from '../../components/CartComponent';\r\nimport Sort from '../../utils/Sort';\r\nclass Home extends AbstractView {\r\n    constructor(params) {\r\n        super(params);\r\n        this.setTitle('Home');\r\n        this.productsView = new ProductCards();\r\n        this.listener = new AllListener();\r\n        this.currentFilters = RouterHelper.setFilter(this.params);\r\n        this.cart = new CartComponent();\r\n        this.minPrice = 0;\r\n        this.maxPrice = 0;\r\n        this.minStock = 0;\r\n        this.maxStock = 0;\r\n    }\r\n    getCategoryProducts(data) {\r\n        let keys = Object.keys(this.currentFilters);\r\n        let productsList = data;\r\n        keys.forEach((key) => {\r\n            productsList = productsList.filter((item) => {\r\n                if (key === 'price' && this.currentFilters[key] != undefined) {\r\n                    this.minPrice = Number(this.currentFilters[key][0]);\r\n                    this.maxPrice = Number(this.currentFilters[key][1]);\r\n                    return (item.price >= Number(this.currentFilters[key][0]) &&\r\n                        item.price <= Number(this.currentFilters[key][1]));\r\n                }\r\n                else if (key === 'stock') {\r\n                    this.minStock = Number(this.currentFilters[key][0]);\r\n                    this.maxStock = Number(this.currentFilters[key][1]);\r\n                    return (item.stock >= Number(this.currentFilters[key][0]) &&\r\n                        item.stock <= Number(this.currentFilters[key][1]));\r\n                }\r\n                else if (key === 'search') {\r\n                    return (item.title\r\n                        .toLowerCase()\r\n                        .includes(String(this.currentFilters[key][0])) ||\r\n                        item.description\r\n                            .toLowerCase()\r\n                            .includes(String(this.currentFilters[key][0])) ||\r\n                        String(item.price) === this.currentFilters[key][0] ||\r\n                        String(item.count) === this.currentFilters[key][0]);\r\n                }\r\n                else if (key === 'sort') {\r\n                    return item;\r\n                }\r\n                else if (key === 'view') {\r\n                    return item;\r\n                }\r\n                else if (key === 'brand') {\r\n                    return this.currentFilters[key].includes(item[key].split(' ').join('-').toLowerCase());\r\n                }\r\n                else if (key === 'category') {\r\n                    return this.currentFilters[key].includes(item[key]);\r\n                }\r\n            });\r\n            if (key === 'sort') {\r\n                this.sortData(productsList);\r\n            }\r\n        });\r\n        return productsList;\r\n    }\r\n    afterRootRender(data) {\r\n        this.cart.clearStorage();\r\n        const productsList = this.getCategoryProducts(data.products);\r\n        const productsElement = this.productsView.draw(productsList);\r\n        const productListContainer = document.querySelector('.products-items');\r\n        if (productsElement) {\r\n            if (productListContainer) {\r\n                productListContainer.append(productsElement);\r\n            }\r\n        }\r\n        else {\r\n            const wrapper = document.createElement('div');\r\n            wrapper.classList.add('not__found');\r\n            if (productListContainer) {\r\n                productListContainer.append(wrapper);\r\n            }\r\n        }\r\n        const maxPrice = Math.max(...productsList.map((item) => item.price));\r\n        const minPrice = Math.min(...productsList.map((item) => item.price));\r\n        const maxStock = Math.max(...productsList.map((item) => item.stock));\r\n        const minStock = Math.min(...productsList.map((item) => item.stock));\r\n        this.listener.listenDynamicData(this.minPrice ? this.minPrice : minPrice, this.maxPrice ? this.maxPrice : maxPrice, this.minStock ? this.minStock : minStock, this.maxStock ? this.maxStock : maxStock, productsList.length);\r\n    }\r\n    render(root, data) {\r\n        const categories = new Set(data.products.map((item) => item.category));\r\n        const brands = new Set(data.products.map((item) => item.brand.toLowerCase()));\r\n        root.innerHTML = homeRoot;\r\n        this.renderFilterData(categories, brands);\r\n        this.listener.listenStaticData(data.products);\r\n        this.afterRootRender(data);\r\n    }\r\n    renderFilterData(categories, brands) {\r\n        const categoryContainer = document.querySelector('#category');\r\n        const brandContainer = document.querySelector('#brand');\r\n        categories.forEach((item) => {\r\n            const div = document.createElement('div');\r\n            div.innerHTML = `\n  <input\n    type=\"checkbox\"\n    id=${item.toLowerCase()}\n    name=\"category\"\n    value=${item.toLowerCase()}\n  /><label class=\"filters__box-label\" for=${item.toLowerCase()}\n    >${item[0].toUpperCase() + item.slice(1, item.length).toLowerCase()}</label>`;\r\n            if (categoryContainer) {\r\n                categoryContainer.append(div);\r\n            }\r\n        });\r\n        brands.forEach((item) => {\r\n            const div = document.createElement('div');\r\n            div.innerHTML = `\n  <input\n    type=\"checkbox\"\n    id=${item.toLowerCase()}\n    name=\"brand\"\n    value=${item.split(' ').join('-')}\n  /><label class=\"filters__box-label\" for=${item.toLowerCase()}\n    >${item[0].toUpperCase() + item.slice(1, item.length).toLowerCase()}</label>`;\r\n            if (brandContainer) {\r\n                brandContainer.append(div);\r\n            }\r\n        });\r\n    }\r\n    sortData(data) {\r\n        switch (this.currentFilters['sort'][0]) {\r\n            case 'price-asc':\r\n                data = Sort.directSort(data, 'price');\r\n                break;\r\n            case 'price-desc':\r\n                data = Sort.reverseSort(data, 'price');\r\n                break;\r\n            case 'rating-asc':\r\n                data = Sort.directSort(data, 'rating');\r\n                break;\r\n            case 'rating-desc':\r\n                data = Sort.reverseSort(data, 'rating');\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n}\r\nexport { Home };\r\n","class ProductCards {\r\n    draw(data) {\r\n        const products = data;\r\n        const cartInStorage = localStorage.getItem('cart');\r\n        let shopInfo = {};\r\n        if (cartInStorage) {\r\n            shopInfo = JSON.parse(cartInStorage);\r\n        }\r\n        const inCart = shopInfo && shopInfo.inCart ? shopInfo.inCart : [];\r\n        const cartId = inCart.map((item) => item.id);\r\n        const fragment = document.createDocumentFragment();\r\n        const cardItemTemp = document.querySelector('#cardTemplate');\r\n        if (products.length > 0 && cardItemTemp) {\r\n            products.forEach((item, idx) => {\r\n                const cardClone = cardItemTemp.content.cloneNode(true);\r\n                cardClone.children[0].classList.add(`id-${item.id}`);\r\n                const imgEl = cardClone.querySelector('.card__body-photo');\r\n                if (imgEl) {\r\n                    imgEl.src = item.thumbnail;\r\n                }\r\n                const titleEl = cardClone.querySelector('.card__body-title');\r\n                if (titleEl) {\r\n                    titleEl.textContent = item.title;\r\n                }\r\n                const brandEl = cardClone.querySelector('.list__item-brand');\r\n                if (brandEl) {\r\n                    brandEl.textContent = `${item.brand}`;\r\n                }\r\n                const priceEl = cardClone.querySelector('.list__item-price');\r\n                if (priceEl) {\r\n                    priceEl.textContent = `${item.price} $`;\r\n                }\r\n                const ratingEl = cardClone.querySelector('.list__item-rating');\r\n                if (ratingEl) {\r\n                    ratingEl.innerHTML = `Rating: <strong>${item.rating}</strong>`;\r\n                }\r\n                const buttonAdd = cardClone.querySelector('.card__buttons-add');\r\n                if (buttonAdd) {\r\n                    buttonAdd.id = `${item.id}`;\r\n                }\r\n                const linkEl = cardClone.querySelector('.card__link-details');\r\n                if (linkEl) {\r\n                    linkEl.href = `#product-details/${item.id}`;\r\n                }\r\n                if (cartId.includes(item.id)) {\r\n                    cardClone.children[0].classList.add('in-cart');\r\n                    const button = cardClone.querySelector('.card__buttons-add');\r\n                    if (button) {\r\n                        button.classList.remove('card__buttons-add');\r\n                        button.classList.add('card__buttons-remove');\r\n                        button.textContent = 'Remove from cart';\r\n                    }\r\n                }\r\n                fragment.append(cardClone);\r\n            });\r\n            return fragment;\r\n        }\r\n        else\r\n            return null;\r\n    }\r\n}\r\nexport default ProductCards;\r\n","import CartComponent from '../CartComponent';\r\nimport Sort from '../Sort/Sort';\r\nimport FilterListener from './FilterListener';\r\nimport PriceFilterListener from './PriceFilterSlider';\r\nimport Search from './SearchListener';\r\nimport StockFilterListener from './StockFilterSlider';\r\nimport UrlCopyListener from './UrlCopyListener';\r\nclass AllListener {\r\n    constructor() {\r\n        this.listenDynamicData = (minPrice, maxPrice, minStock, maxStock, count) => {\r\n            this.price.listenPrice(minPrice, maxPrice);\r\n            this.stock.listenStock(minStock, maxStock);\r\n            this.sort.listen(count);\r\n        };\r\n        this.search = new Search();\r\n        this.price = new PriceFilterListener();\r\n        this.stock = new StockFilterListener();\r\n        this.sort = new Sort();\r\n        this.filters = new FilterListener();\r\n        this.cart = new CartComponent();\r\n        this.copyUrl = new UrlCopyListener();\r\n    }\r\n    listenStaticData(data) {\r\n        this.filters.listen();\r\n        this.search.listenSearch();\r\n        this.cart.listenCart(data);\r\n        this.copyUrl.listen();\r\n        if (location.hash.length < 1) {\r\n            this.clearFilters();\r\n        }\r\n    }\r\n    clearFilters() {\r\n        this.filters.clearFilters();\r\n    }\r\n}\r\nexport default AllListener;\r\n","import Storage from '../../utils/Storage';\r\nimport RouterHelper from '../../utils/RouterHelper';\r\nclass FilterListener {\r\n    constructor() {\r\n        this.listen = () => {\r\n            this.addChecked();\r\n            const filtersBox = document.querySelector('.filters__box');\r\n            if (filtersBox) {\r\n                filtersBox.addEventListener('change', (e) => {\r\n                    if (e.target instanceof HTMLInputElement) {\r\n                        if (this.filters.includes(e.target.name)) {\r\n                            const allCheckedInputs = document.querySelectorAll(`[name=${e.target.name}]:checked`);\r\n                            const checkedValues = [];\r\n                            allCheckedInputs.forEach((name) => {\r\n                                checkedValues.push(name.value);\r\n                            });\r\n                            this.storage.set(`${e.target.name}`, checkedValues);\r\n                            const currentFilters = this.storage.getAll();\r\n                            let hash = `#?/`;\r\n                            const currentHash = window.location.hash;\r\n                            const hashToAdd = currentHash\r\n                                .slice(3, currentHash.length)\r\n                                .split('&')\r\n                                .filter((item) => item.slice(0, 5) === 'price' ||\r\n                                item.slice(0, 5) === 'stock' ||\r\n                                item.slice(0, 6) === 'search' ||\r\n                                item.slice(0, 4) === 'view' ||\r\n                                item.slice(0, 4) === 'sort');\r\n                            this.filters.forEach((item, i) => {\r\n                                if (currentFilters[item] && currentFilters[item].length > 0) {\r\n                                    hash += `${i > 0 && hash.length > 3 ? '&' : ''}${item}=${currentFilters[item].join('+')}`;\r\n                                }\r\n                            });\r\n                            hashToAdd.forEach((item) => (hash += `&${item}`));\r\n                            hash[3] === '&' ? (hash = hash.replace('&', '')) : hash;\r\n                            window.location.hash = hash.length === 3 ? '' : hash;\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n            const buttonRemove = document.querySelector('#remove');\r\n            if (buttonRemove) {\r\n                buttonRemove.addEventListener('click', (e) => {\r\n                    if (e.target instanceof HTMLElement) {\r\n                        const closestEl = e.target.closest('div');\r\n                        if (closestEl && closestEl.id === 'remove') {\r\n                            this.clearFilters();\r\n                            window.location.hash = '';\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n        };\r\n        this.addChecked = () => {\r\n            let currentFilters = RouterHelper.setFilter(location.hash);\r\n            this.filters.forEach((filter) => {\r\n                if (currentFilters[filter]) {\r\n                    const inputs = document.querySelectorAll(`[name=${filter}]`);\r\n                    inputs.forEach((input) => {\r\n                        if (currentFilters[filter].includes(input.value)) {\r\n                            input.checked = true;\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n        };\r\n        this.filters = [\r\n            \"category\" /* Filters.Category */,\r\n            \"brand\" /* Filters.Brand */,\r\n            \"price\" /* Filters.Price */,\r\n            \"stock\" /* Filters.Stock */,\r\n        ];\r\n        this.storage = new Storage('shop');\r\n    }\r\n    clearFilters() {\r\n        this.filters.forEach((filter) => this.storage.drop(filter));\r\n        const allCheckedInputs = document.querySelectorAll(`[type=\"checkbox\"]:checked`);\r\n        allCheckedInputs.forEach((input) => (input.checked = false));\r\n    }\r\n}\r\nexport default FilterListener;\r\n","export const homeRoot = `<section class=\"products container\">\n<aside class=\"products__filter\">\n  <div class=\"filters__box\">\n  <div>\n   <h3>Category</h3>\n    <div id=\"category\">\n       </div>\n    </div>\n    <div>\n      <h3>Brand</h3>\n       <div id=\"brand\">\n        </div>\n    </div>\n      <div id=\"price\">\n      <h3>Price</h3>\n      <div class=\"price__content\">\n        <div class=\"value-field\">\n          <label class=\"price__content-label\">Min:</label>\n          <p id=\"min-value-price\">$0</p>\n        </div>\n        <div class=\"value-field\">\n          <label class=\"price__content-label\">Max:</label>\n          <p id=\"max-value-price\">$1749</p>\n        </div>\n      </div>\n      <div class=\"range-slider\">\n        <input\n          type=\"range\"\n          class=\"min-price\"\n          value=\"0\"\n          min=\"0\"\n          max=\"1749\"\n          step=\"1\"\n        />\n        <input type=\"range\" class=\"max-price\" value=\"0 min=\"0\" max=\"1749\"\n        step=\"1\">\n      </div>\n    </div>\n    <div id=\"stock\">\n      <h3>Stock</h3>\n      <div class=\"stock__content\">\n        <div class=\"value-field\">\n          <label class=\"stock__content-label\">Min:</label>\n          <p id=\"min-value-stock\">0</p>\n        </div>\n\n        <div class=\"value-field\">\n          <label class=\"stock__content-label\">Max:</label>\n          <p id=\"max-value-stock\">0</p>\n        </div>\n      </div>\n      <div class=\"range-slider\">\n        <input\n          type=\"range\"\n          class=\"min-stock\"\n          value=\"0\"\n          min=\"0\"\n          max=\"150\"\n          step=\"1\"\n        />\n        <input type=\"range\" class=\"max-stock\" value=\"0 min=\"0\" max=\"150\"\n        step=\"1\">\n      </div>\n      <div id=\"remove\">\n        <button class=\"filters__box-remove\">Remove all filters</button>\n      </div>\n      <div class=\"copy__wrapper\">\n        <button class=\"copy\">Copy link</button>\n      </div>\n    </div>\n  </div>\n</aside>\n<div class=\"products__wrapper\">\n<div class=\"sort-products\">  \n<div class=\"sort-bar\">\n<div class=\"select\">\n<input type=\"select-text\" id=\"input\" readonly placeholder=\"Sort options\">\n</div>\n<div class=\"option-container\">\n<div class=\"option\" id = \"price-ASC\">\n    <label > Sort by price ASC </label>\n</div>\n<div class=\"option\" id = \"price-DESC\">\n    <label>Sort by price DESC</label>\n</div>\n<div class=\"option\" id = \"rating-ASC\">\n    <label>Sort by rating ASC</label>\n</div>\n<div class=\"option\" id = \"rating-DESC\">\n    <label>Sort by rating DESC</label>\n</div>\n\n</div>\n</div>\n\n<div class=\"stat\"><p>Found:&nbsp;&nbsp;</p><p class=\"stat-count\">4</p></div>\n<div class=\"search-bar\">\n<input class=\"search__input\" type=\"search\" placeholder=\"Search..\" />\n</div>\n<div class=\"view-mode\">\n<div class=\"three active\"></div><div class=\"two\"></div></div>\n</div>\n <div class=\"products-items\"></div>\n</div>\n</section>\n`;\r\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nexport default class ProductsData {\r\n    static getData(url) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const response = yield fetch(url);\r\n            const data = yield response.json();\r\n            return data;\r\n        });\r\n    }\r\n}\r\n","export default class Header {\r\n    static listener() {\r\n        const header = document.querySelector('header');\r\n        header\r\n            ? header.addEventListener('click', (e) => {\r\n                if (e.target instanceof HTMLElement) {\r\n                    if (e.target.classList.contains('basket')) {\r\n                        window.location.hash = '#cart';\r\n                    }\r\n                    if (e.target.classList.contains('logo')) {\r\n                        window.location.hash = '';\r\n                    }\r\n                }\r\n            })\r\n            : null;\r\n    }\r\n}\r\n","import App from './components/App';\r\nimport './styles/main.scss';\r\nconst app = new App();\r\napp.start();\r\n","import Router from '../utils/Router';\r\nimport Header from '../components/Header';\r\nexport default class App {\r\n    start() {\r\n        const routing = new Router();\r\n        window.addEventListener('popstate', routing.router);\r\n        document.addEventListener('DOMContentLoaded', () => {\r\n            document.body.addEventListener('click', (e) => {\r\n                const { target } = e;\r\n                if (target instanceof HTMLLinkElement &&\r\n                    target.matches('[data-link]')) {\r\n                    e.preventDefault();\r\n                    routing.navigateTo(target.href);\r\n                }\r\n            });\r\n            routing.router();\r\n            Header.listener();\r\n        });\r\n    }\r\n}\r\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport { ProductDetails } from '../pages/ProductDetails/ProductDetails';\r\nimport Error from '../pages/404/404';\r\nimport { Cart } from '../pages/Basket/Cart';\r\nimport { Home } from '../pages/Home/Home';\r\nimport ProductsData from './ProductsData';\r\nclass Router {\r\n    constructor() {\r\n        this.root = document.querySelector('#root');\r\n    }\r\n    router() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const routes = [\r\n                { path: '/', view: Home },\r\n                { path: '#product-details', view: ProductDetails },\r\n                { path: '#?', view: Home },\r\n                { path: '#cart', view: Cart },\r\n            ];\r\n            const data = ProductsData.getData('https://dummyjson.com/products?limit=100');\r\n            const currentProducts = yield data;\r\n            const hash = location.hash.toLocaleLowerCase() || '/';\r\n            const isAppRoute = () => {\r\n                if (hash === '/') {\r\n                    return 0;\r\n                }\r\n                else {\r\n                    const hashStart = hash.split('/').slice(0, 1).join('');\r\n                    let matchInd;\r\n                    routes.forEach((route, i) => {\r\n                        if (route.path.startsWith(hashStart)) {\r\n                            matchInd = i;\r\n                        }\r\n                    });\r\n                    return matchInd;\r\n                }\r\n            };\r\n            const pathInd = isAppRoute();\r\n            const productList = document.querySelector('.products-items');\r\n            const view = pathInd !== undefined && pathInd >= 0\r\n                ? new routes[pathInd].view(hash)\r\n                : new Error(hash);\r\n            if ((pathInd === 0 || pathInd === 2) &&\r\n                hash.length > 3 &&\r\n                productList &&\r\n                currentProducts.products.length > 0) {\r\n                productList.innerHTML = '';\r\n                view.afterRootRender(currentProducts);\r\n            }\r\n            else {\r\n                if (this.root && currentProducts.products.length > 0) {\r\n                    this.root.innerHTML = '';\r\n                    view.render(this.root, currentProducts);\r\n                }\r\n            }\r\n        });\r\n    }\r\n    navigateTo(url) {\r\n        history.pushState(null, '', url);\r\n        this.router();\r\n    }\r\n}\r\nexport default Router;\r\n"],"names":["AbstractView","constructor","params","this","setTitle","title","document","render","root","data","RouterHelper","checkId","path","pathArray","split","length","Number","slice","join","setFilter","includes","filtersString","replace","filters","forEach","elem","key","valuesString","values","Validator","static","name","nameArray","filter","part","number","String","test","address","addressArray","email","toLowerCase","cardNumber","isCreditCardNumber","validThru","validThruArray","cvv","ccn","cnnArr","toString","n","map","item","i","itemNumber","reduce","prev","curr","Modal","getElementById","listener","modal","querySelector","addEventListener","location","hash","buyFromProductDetails","createModal","form","inputName","inputNumber","inputAddress","inputEmail","inputValidThru","inputCvv","event","preventDefault","isValidForm","e","validName","currentValue","target","value","validPhone","validAddress","validEmail","validCardNumber","cardNumberHandler","validThruHandler","cvvHandler","validCvv","isValidValidThru","classList","remove","add","isValidCvv","window","currentTarget","className","createElement","innerHTML","after","inputCardNumber","isValid","querySelectorAll","localStorage","clear","modalContent","style","top","setTimeout","InputEvent","bankCardImg","src","input","isValidEmail","isValidPhone","isValidName","isValidAddress","isValidCardNumber","currentId","isCart","getItem","itemsInCart","JSON","parse","inCart","id","previousProducts","currentProduct","find","count","push","newData","stringify","setItem","promocodes","rss","epam","develop","PromoCode","couponInput","appliedPromo","Set","createList","promo","createPromo","deletePromo","wrapper","promoElement","applyPromoBtn","textContent","array","append","findCoupon","startsWith","closest","appliedCoupons","promos","size","Array","from","coupon","drop","delete","newArray","setNewPrice","discountPrice","buyTotalAmount","percentAmount","total","toFixed","Cart","super","cart","CartComponent","fillCartList","currentCart","getCart","orderEl","pagination","limit","limitValue","currentPage","currentPageValue","start","lastIndex","end","dataToShow","setCurrentAmountHeader","cartWrapper","content","thumbnail","category","toUpperCase","description","rating","price","stock","a","b","cartSection","textForEmpty","listenCount","listenCardDetails","afterRootRender","modalWindow","products","store","obj","getAll","set","get","dropAll","storage","cartData","listenCart","allData","allProducts","productDetail","currentContent","HTMLElement","checkedProduct","toggleButton","HTMLButtonElement","cartList","contains","closestEl","prod","view","totalAmount","getTotalAmount","amountEl","setProductsInCart","cartHeader","basketAmount","productInCart","display","productsList","text","addedItem","toggle","currentLimit","limitElement","inputLimit","paginator","countItems","itemsOnPage","countPages","Math","ceil","page","next","insertAdjacentHTML","currentPageEl","checkedPage","checkPage","HTMLInputElement","currentFilters","prevHash","clearStorage","PhotoListener","listenPhoto","imgBox","mainPhoto","imgList","HTMLImageElement","tagName","currentSrc","ProductDetails","productsView","draw","cartInStorage","shopInfo","cartId","fragment","createDocumentFragment","cardItemTemp","HTMLTemplateElement","product","cardClone","cloneNode","crumbEl","href","brandCrumb","brand","titleCrumb","titleEl","imgEl","imgElTwo","images","imgElThree","imgMain","descriptionEl","ratingEl","stockEl","brandEl","categoryEl","priceEl","buttonAdd","photo","showIncorrect","div","x","productItem","productItemContainer","errorWrapper","Sort","listen","listenSort","listenFound","listenView","inputSort","currentSort","currentSortEl","selectedSort","sortValue","selectContainer","select","options","checkedSort","closestTarget","option","children","changeHash","sortBar","targetClosest","property","currentHash","statElement","viewMode","productContainer","currentView","viewCurrent","currentViewEl","PriceFilterListener","min","max","validateRange","minPrice","maxPrice","minPriceInput","maxPriceInput","minValue","maxValue","Infinity","listenPrice","inputElements","parseInt","Search","listenSearch","inputSearch","search","StockFilterListener","minStock","maxStock","minStockInput","maxStockInput","listenStock","UrlCopyListener","copyBtn","tempInput","parentNode","appendChild","execCommand","removeChild","field","sort","Home","idx","linkEl","button","listenDynamicData","addChecked","filtersBox","allCheckedInputs","checkedValues","hashToAdd","buttonRemove","clearFilters","checked","copyUrl","listenStaticData","getCategoryProducts","keys","Object","undefined","sortData","productsElement","productListContainer","categories","brands","renderFilterData","categoryContainer","brandContainer","ProductsData","url","thisArg","_arguments","generator","response","fetch","json","P","Promise","resolve","reject","fulfilled","step","rejected","result","done","then","apply","Header","header","routing","router","routes","getData","currentProducts","toLocaleLowerCase","pathInd","hashStart","matchInd","route","isAppRoute","productList","navigateTo","history","pushState","body","HTMLLinkElement","matches"],"sourceRoot":""}