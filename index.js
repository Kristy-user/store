(()=>{"use strict";const t=class{draw(t){const e=t,r=document.createDocumentFragment(),c=document.querySelector("#cardTemplate");return e.forEach(((t,e)=>{const n=c.content.cloneNode(!0);n.id=`${t.id}`,n.querySelector(".card__body-photo").style.backgroundImage=`url(${t.thumbnail})`,n.querySelector(".card__body-title").textContent=t.title,n.querySelector(".list__item-category").textContent=`Category ${t.category}`,n.querySelector(".list__item-brand").textContent=`Brand: ${t.brand}`,n.querySelector(".list__item-price").textContent=`Price: ${t.price}`,n.querySelector(".list__item-rating").textContent=`Rating: ${t.rating}`,n.querySelector(".list__item-stock").textContent=`Stock: ${t.stock} `,n.querySelector(".card__link-details").href=`/#/product-details/${t.id}`,r.append(n)})),r}};class e{constructor(t){this.params=t}setTitle(t){document.title=t}async render(){return""}async executeViewScript(){}}class r extends e{constructor(e){super(e),this.setTitle("Home"),this.productsView=new t}async getAllProducts(){const t=await fetch("https://dummyjson.com/products"),e=await t.json();return this.productsView.draw(e.products)}async executeViewScript(){const t=await this.getAllProducts();document.querySelector(".products").append(t)}async render(){return'<section class="products container"></section>'}}class c extends e{constructor(e){super(e),this.productId=e.id,this.setTitle("Product Details"),this.productsView=new t}async getItem(){const t=await fetch(`https://dummyjson.com/products/${this.productId}`),e=await t.json();return this.productsView.draw([e])}async executeViewScript(){const t=await this.getItem();document.querySelector("#root .container").append(t)}async render(){return'\n    <div class="container">\n  </div>'}}const n=async()=>{location.hash.slice(1).toLocaleLowerCase();const t=[{path:"/",view:r},{path:"/product-details/:id",view:c}];let e=t.map((t=>{return{route:t,result:location.hash.slice(1).match((e=t.path,new RegExp("^"+e.replace(/\//g,"\\/").replace(/:\w+/g,"(.+)")+"$")))};var e})).find((t=>null!==t.result));e||(e={route:t[0],result:[location.pathname]});const n=new e.route.view((t=>{const e=t.result.slice(1),r=Array.from(t.route.path.matchAll(/:(\w+)/g)).map((t=>t[1]));return Object.fromEntries(r.map(((t,r)=>[t,e[r]])))})(e));document.querySelector("#root").innerHTML=await n.render(),await n.executeViewScript()};window.addEventListener("popstate",n),document.addEventListener("DOMContentLoaded",(()=>{document.body.addEventListener("click",(t=>{var e;t.target.matches("[data-link]")&&(t.preventDefault(),e=t.target.href,history.pushState(null,null,e),n())})),n()}))})();
//# sourceMappingURL=index.js.map